<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Java面试,Java Web,">










<meta name="description" content="目录 J2EE相关知识点 框架相关知识点">
<meta name="keywords" content="Java面试,Java Web">
<meta property="og:type" content="article">
<meta property="og:title" content="Java面试知识点总结-Java Web篇">
<meta property="og:url" content="https://aimanyeye.github.io/2019/08/05/2019-08-05-Java面试知识点总结-Java Web篇/index.html">
<meta property="og:site_name" content="aimanyeye">
<meta property="og:description" content="目录 J2EE相关知识点 框架相关知识点">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/01Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/02Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/03Servlet%E7%9A%84%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/06tomcat%E8%A7%A3%E5%86%B3%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/04%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/05%E9%87%8D%E5%AE%9A%E5%90%91.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/07cookie.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/08session.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/09%E8%BF%87%E6%BB%A4%E5%99%A8.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/10%E8%BF%87%E6%BB%A4%E5%99%A8.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/11MVC.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/12Spring.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/13springioc.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/14springioc.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/15AOP.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/16SpringMVC%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/17SpringMVC%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/18SpringMVC%E6%9E%B6%E6%9E%84.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/19mybatis%E7%BC%93%E5%AD%98.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/20mybatis%E7%BC%93%E5%AD%98.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/21%E5%88%86%E9%A1%B5.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/22%E5%88%86%E9%A1%B5.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/23%E5%88%86%E9%A1%B5.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/25%E5%88%86%E9%A1%B5.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/24%E5%88%86%E9%A1%B5.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/26json.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/27json.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/28json.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/29json.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/30restful.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/31restful.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/32restful.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/33restful.png?raw=true">
<meta property="og:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/34restful.png?raw=true">
<meta property="og:updated_time" content="2019-08-09T04:53:18.735Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java面试知识点总结-Java Web篇">
<meta name="twitter:description" content="目录 J2EE相关知识点 框架相关知识点">
<meta name="twitter:image" content="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/01Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png?raw=true">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://aimanyeye.github.io/2019/08/05/2019-08-05-Java面试知识点总结-Java Web篇/">





  <title>Java面试知识点总结-Java Web篇 | aimanyeye</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">aimanyeye</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">刻苦学习，解决眼前的苟且，追寻诗和远方...</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://aimanyeye.github.io/2019/08/05/2019-08-05-Java面试知识点总结-Java Web篇/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="艾曼爷爷">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="aimanyeye">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java面试知识点总结-Java Web篇</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-05T13:50:32+08:00">
                2019-08-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java面试/" itemprop="url" rel="index">
                    <span itemprop="name">Java面试</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java面试/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>阅读数
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  18.4k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  75 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a><strong>目录</strong></h3><ol>
<li>J2EE相关知识点</li>
<li>框架相关知识点</li>
</ol>
<a id="more"></a>
<h2 id="1-J2EE相关知识点"><a href="#1-J2EE相关知识点" class="headerlink" title="1. J2EE相关知识点"></a>1. J2EE相关知识点</h2><h3 id="1-1-Servlet-的生命周期？"><a href="#1-1-Servlet-的生命周期？" class="headerlink" title="1.1 Servlet 的生命周期？"></a>1.1 Servlet 的生命周期？</h3><p>在 Web 容器中，Servlet 主要经历 4 个阶段，如下图：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/01Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png?raw=true" alt="01Servletççå½å¨æ.png"></p>
<ul>
<li><strong>（1）加载 Servlet</strong>：当 Tomcat 第一次访问 Servlet 的时候，Tomcat 会负责创建 Servlet 的实例。</li>
<li><strong>（2）初始化 Servlet</strong>：当 Servlet 被实例化之后，Tomcat 会调用 init() 方法来初始化这个对象。</li>
<li><strong>（3）处理服务</strong>：当浏览器访问 Servlet 的时候，Servlet 会调用 service() 方法处理请求。</li>
<li><strong>（4）销毁</strong>：当 Tomcat 关闭或者检测到 Servlet 要从 Tomcat 删除的时候，会自动调用 destroy() 方法，让该实例所占用的资源释放掉。一个 Servlet 如果长时间不被使用的话，也会被 Tomcat 自动销毁。</li>
</ul>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/02Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png?raw=true" alt="02Servletççå½å¨æ.png"></p>
<p><strong>简单总结</strong>：只要访问 Servlet ，就会调用其对应的 service() 方法，init() 方法只会在第一次访问 Serlvet 的时候才会被调用。</p>
<h3 id="1-2-Servlet-的请求流程？"><a href="#1-2-Servlet-的请求流程？" class="headerlink" title="1.2 Servlet 的请求流程？"></a>1.2 Servlet 的请求流程？</h3><p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/03Servlet%E7%9A%84%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B.png?raw=true" alt="03Servletçè¯·æ±æµç¨.png"></p>
<ul>
<li><strong>（1）浏览器发出请求：</strong> <code>http://localhost:80/xxx1/xxx2</code> （80端口可以默认不写，因为这是http协议默认的端口，平时我们访问<code>https://www.baidu.com/</code> 时其实访问的是<code>https://www.baidu.com:80/</code>）</li>
<li><strong>（2）服务器解析请求信息：</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http:协议名称</span><br><span class="line">localhost:访问的是互联网中的哪一台计算机</span><br><span class="line">80:从主机当中找到对应 80 端口的程序 （这里即为 Tomcat 服务器）</span><br><span class="line">/xxx1:当前项目的上下文路径 （即在 server.xml 中配置主机时配置的 path属性）</span><br><span class="line">/xxx2:当前请求的资源名</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>（3）解析</strong> Tomcat 服务器根目录下的 <strong>/config/server.xml</strong> 文件：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context docBase=&quot;D:\javaPros\test\webapp&quot; path=&quot;xxx1&quot; /&gt;</span><br><span class="line">...</span><br><span class="line">	判断哪一个&lt;Context /&gt;元素的 path属性 属性为 xxx1?</span><br><span class="line">若找不到，则返回 404错误</span><br><span class="line">若找到了，则解析该&lt;Context /&gt;元素，得到docBase属性，获取当前访问 Web 项目的跟的绝对路径：D:\javaPros\test\webapp</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>（4）</strong> 从<code>D:\javaPros\test\webapp</code>下的 <strong>WEB-INF</strong> 下找到 <strong>web.xml</strong> 文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">判断 web.xml 文件中是否有 &lt;url-pattern&gt; 的文本内容为 /xxx2?</span><br><span class="line">若找不到，则返回 404错误</span><br><span class="line">若找到了，则继续获取该资源对应 Servlet 类的全限名称： xxx.xxx</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>（5）</strong> 判断 <strong>Servlet 实例缓存池</strong> 中是否有 xxx.xxx 的对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Servlet&gt; cache = ......(Tomcat提供的);</span><br><span class="line">    key:存Servlet类的全限定名称</span><br><span class="line">    value:该Servlet类的对象.</span><br><span class="line">Servlet obj = cache.get(<span class="string">"xxx.xxx"</span>);</span><br><span class="line">    <span class="keyword">if</span>(obj==<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">//Servlet实例缓存中没有该类的对象,第一次.</span></span><br><span class="line">        GOTO <span class="number">6</span>:</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//有对象,非第一次.</span></span><br><span class="line">        GOTO <span class="number">8</span>:</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>（6）使用反射</strong>调用构造器，<strong>创建对应的对象</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">obj = Class.forName(<span class="string">"xxx.xxx"</span>).newInstance();</span><br><span class="line"><span class="comment">//把当前创建的 Servlet 对象，存放在缓存之中，供给下一次的使用.</span></span><br><span class="line">cache.put(<span class="string">"xxx.xxx"</span>,obj);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>（7）</strong>创建 <strong>ServletConfig 对象</strong>，并调用 <strong>init()</strong> 方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj.init(config);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>（8）</strong>创建 <strong>ServletRequest 对象和 ServletResponse 对象</strong>，并调用 <strong>service()</strong>方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj.service(req,resp);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>（9）</strong>在 <strong>service()</strong> 方法中对浏览器作出响应操作。</li>
</ul>
<h3 id="1-3-Servlet-是单例的吗？为什么？"><a href="#1-3-Servlet-是单例的吗？为什么？" class="headerlink" title="1.3 Servlet 是单例的吗？为什么？"></a>1.3 Servlet 是单例的吗？为什么？</h3><p>Servlet 是单例的，<strong>浏览器多次对Servlet的请求</strong>，一般情况下，<strong>服务器只创建一个Servlet对象</strong>，也就是说，Servlet对象<strong>一旦创建了</strong>，就会驻留在内存中，<strong>为后续的请求做服务，直到服务器关闭。</strong></p>
<h3 id="1-4-GET和POST的区别"><a href="#1-4-GET和POST的区别" class="headerlink" title="1.4 GET和POST的区别"></a>1.4 GET和POST的区别</h3><p>首先GET 和 POST 都是请求方式。</p>
<p><strong>GET：</strong></p>
<p>浏览器器地址栏：<code>http://localhost/test.html?name=aimanyeye&amp;sex=male</code></p>
<p>这里提交了两个参数，一个是<code>name</code>属性值为<code>aimanyeye</code>，另一个是<code>sex</code>属性值为<code>male</code>，这是一种直接的请求方式，在请求资源后面跟上 <strong>?</strong> 符号与参数连接，其他的参数使用 <strong>&amp;</strong> 符号连接。</p>
<p><strong>缺点：</strong></p>
<ul>
<li>暴露请求信息，<strong>不安全</strong></li>
<li>请求信息不能超过<strong>1kb</strong>，可传输的信息有限，不能上传图片。</li>
</ul>
<p><strong>POST：</strong></p>
<p>浏览器地址栏：<code>http://localhost/test.html#</code></p>
<p><strong>优点：</strong></p>
<ul>
<li>隐藏了请求信息，<strong>较安全</strong>（但仍可以通过相关工具访问到数据）</li>
<li>POST 方式<strong>没有限制</strong>请求的数据大小，可以做图片的上传</li>
</ul>
<h3 id="1-5-Tomcat-中如何解决中文乱码问题？"><a href="#1-5-Tomcat-中如何解决中文乱码问题？" class="headerlink" title="1.5 Tomcat 中如何解决中文乱码问题？"></a>1.5 Tomcat 中如何解决中文乱码问题？</h3><p>在 <strong>Tomcat 服务器</strong>中，接受请求的时候，<strong>默认的编码方式为 ISO-8859-1</strong>，而该编码方式只占一个字节，不支持中文（两个字节），所以当我们做请求的时候，会出现乱码的问题。</p>
<p><strong>解决方案：</strong></p>
<p>（1）对乱码使用 <strong>ISO-8859-1</strong> 解码，转换成<strong>byte数组</strong>，恢复为二进制</p>
<p><code>byte[] data = name.getBytes(&quot;ISO-8859-1&quot;);</code></p>
<p>（2）对byte数组重新进行 UTF-8 编码：</p>
<p><code>name = new String(data,&quot;UTF-8&quot;);</code><br>但是这样会出现一个问题，那就是当表单数据太多的时候，这样反复解码-编码，会很繁琐。</p>
<p><strong>终极解决方案：</strong></p>
<p><strong>对于 POST 请求：</strong></p>
<p>设置请求的编码方式：<code>request.setCharacterEncoding(&quot;UTF-8&quot;);</code><br><strong>注意：</strong>必须在获取<strong>第一个参数之前设置</strong>，并且该方式<strong>只对 POST 方式有效。</strong></p>
<p><strong>对于 GET 请求：</strong></p>
<p>重新设置 Tomcat 的编码方式，修改 Tomcat 的配置文件:<br><code>Tomcat根目录/conf/server.xml(修改端口的那一行)</code></p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/06tomcat%E8%A7%A3%E5%86%B3%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98.png?raw=true" alt="06tomcatè§£å³ä¸­æä¹±ç é®é¢.png"></p>
<h3 id="1-6-forward-与-redirect-的区别"><a href="#1-6-forward-与-redirect-的区别" class="headerlink" title="1.6 forward 与 redirect 的区别"></a>1.6 forward 与 redirect 的区别</h3><ul>
<li><h4 id="请求转发（forward）"><a href="#请求转发（forward）" class="headerlink" title="请求转发（forward）"></a>请求转发（forward）</h4></li>
</ul>
<p>又叫做<strong>直接转发方式，</strong>客户端和浏览器<strong>只发出一次请求，</strong>Servlet、HTML、JSP或其它信息资源，由<strong>第二个信息资源响应该请求，</strong>在请求对象request中，保存的对象对于<strong>每个信息资源是共享的。</strong></p>
<p><strong>比如：</strong>从 AServlet 请求转发到 BServlet</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/04%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91.png?raw=true" alt="04è¯·æ±è½¬å.png"></p>
<p><strong>语法：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//参数： path，要跳转到的资源路径：上下文路径 / 资源路径</span><br><span class="line">request.getRequestDispatcher(path).forward(request, response);</span><br></pre></td></tr></table></figure>
<p><strong>特点：</strong></p>
<p><strong>（1）地址栏中的地址【不会】改变</strong>，通常看作是服务端的跳转</p>
<p><strong>（2）只有一个请求</strong></p>
<p><strong>（3）资源是共享的</strong></p>
<p>也就是说在两个 Servlet 中可以共享请求的资源，可以通过<code>request.setAttribute(String var1,Object var2)</code><strong>设置要共享的数据资源</strong>，并通过<code>request.getAttribute(String var1);</code>来<strong>获取传递的资源</strong>。</p>
<p><strong>（4）【可以】访问 WEB-INF 中的资源</strong></p>
<p><strong>WEB-INF</strong> 文件夹是 Java Web 应用的<strong>默认安全目录，</strong>即客户端无法直接访问，只有服务端可以访问的目录。如果想在页面中<strong>直接访问</strong>其中的文件，<strong>必须通过web.xml文件</strong>对要访问的文件进行<strong>相应映射</strong>才能访问。</p>
<p><strong>注意：</strong>在实际的开发中，可以把不希望用户直接访问到（通过浏览器输入地址栏）的网页放在文件夹中<strong>通过此方式访问。</strong></p>
<p><strong>（5）请求转发【不能】跨域访问</strong></p>
<p>所谓的同域，是指<strong>域名，协议，端口均相同</strong></p>
<ul>
<li><h4 id="URl-重定向（redirect）"><a href="#URl-重定向（redirect）" class="headerlink" title="URl 重定向（redirect）"></a>URl 重定向（redirect）</h4></li>
</ul>
<p>又叫做<strong>间接转发方式（Redirect）</strong>实际是<strong>两次HTTP请求，</strong>服务器端在响应第一次请求的时候，让浏览器再向另外一个URL发出请求，从而达到转发的目的。</p>
<p><strong>比如：</strong>从AServlet重定向到BServlet</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/05%E9%87%8D%E5%AE%9A%E5%90%91.png?raw=true" alt="05éå®å.png"></p>
<p><strong>语法：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参数：location，转发到的资源路径</span></span><br><span class="line">response.sendRedirect(String location);</span><br></pre></td></tr></table></figure>
<p><strong>特点：</strong></p>
<p><strong>（1）地址栏中的地址【会】发生改变</strong>，通常看作是客户端跳转。</p>
<p><strong>（2）有两个请求</strong></p>
<p><strong>（3）在两个 Servlet 中不可以共享请求中的数据</strong></p>
<p><strong>（4）最终的响应由 BServlet 来决定，和 AServlet 没有关系</strong></p>
<p><strong>（5）【不可以】访问 WEB-INF 中的资源</strong></p>
<p><strong>（6）请求转发【能】跨域访问</strong></p>
<p>就像是在网页中点开了新的链接一样</p>
<p><strong>总结：</strong>URL 重定向相当于是将重定向的资源路径，重新复制到浏览器地址栏中按下回车一样，<strong>重新发送一次新的请求。</strong></p>
<h3 id="1-7-JSP-的执行原理？"><a href="#1-7-JSP-的执行原理？" class="headerlink" title="1.7 JSP 的执行原理？"></a>1.7 JSP 的执行原理？</h3><p>当访问一个 JSP 页面时，该页面请求将会讲给服务器中的 <strong>JSP 引擎</strong>去处理，它<strong>负责解释和执行 JSP 页面，</strong>每个 JSP 页面在<strong>第一次被访问时</strong>，JSP 引擎就会将它翻译成一个继承自 <code>org.apache.jasper.runtime.HttpJspBase</code>类的 <strong>Servlet 源程序，接着再编译成 class 类文件</strong>，再由 Web 容器<strong>像调用普通 Servlet 程序一样</strong>的方式来装载和解释执行这个由 JSP 页面翻译成的 Servlet 程序。</p>
<h3 id="1-8-request-getAttribute-和-request-getParameter-有何区别？"><a href="#1-8-request-getAttribute-和-request-getParameter-有何区别？" class="headerlink" title="1.8 request.getAttribute() 和 request.getParameter() 有何区别？"></a>1.8 request.getAttribute() 和 request.getParameter() 有何区别？</h3><ol>
<li><code>request.getParameter()</code> 通常用来接收接收表单的<code>get</code>或者<code>post</code>提交过来的参数；而<code>request.getAttribute()</code>一般和<code>setAttribute()</code>搭配使用，只有先<code>set</code>之后才能通过<code>get</code>方法获取到<code>Object</code>类型的数据。</li>
<li><code>getAttribute</code> 返回的是对象，而<code>getParameter</code> 返回的是字符串。</li>
<li><code>getAttribute</code> 和 <code>setAttribute</code> 只是在 <code>web</code> 容器内流转，仅仅是请求处理阶段；而 <code>getParameter</code> 取到的数据是通过容器来获取的。</li>
</ol>
<h3 id="1-9-JSP-与-Servlet-的区别？"><a href="#1-9-JSP-与-Servlet-的区别？" class="headerlink" title="1.9 JSP 与 Servlet 的区别？"></a>1.9 JSP 与 Servlet 的区别？</h3><ol>
<li><strong>JSP 实质上就是一个 Servlet。</strong>可以理解为，JSP 是编译后的 “Servlet 类”。</li>
<li>JSP 由 HTML 代码和 JSP 标签组成，更擅长页面显示；而 Servlet 更擅长流程控制；</li>
<li>JSP 感觉像是 HTML 中嵌入 Java 代码，而 Servlet 有些像 Java 中嵌入 HTML 代码的意思。</li>
</ol>
<h3 id="1-10-JSP-静态包含和动态包含的区别？"><a href="#1-10-JSP-静态包含和动态包含的区别？" class="headerlink" title="1.10 JSP 静态包含和动态包含的区别？"></a>1.10 JSP 静态包含和动态包含的区别？</h3><p><strong>（1）静态包含：编译指令包含</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@include file=&quot;被包含的页面的路径&quot;%&gt;</span><br></pre></td></tr></table></figure>
<p>包含的时机：在 JSP 文件被翻译的时候合并在一起，最终翻译得到一个 class文件</p>
<p><strong>（2）动态包含：动作指令包含</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=&quot;被包含页面的路径&quot;&gt;&lt;/jsp:include&gt;</span><br></pre></td></tr></table></figure>
<p>包含的时机：在运行阶段合并代码，最终得到两个 class 文件</p>
<p><strong>（3）动态包含和静态包含的选择</strong></p>
<ul>
<li>如果被包含的页面如果是静态页面,那么使用静态包含；</li>
<li>如果被包含的如果是动态页面,那么使用动态包含。</li>
</ul>
<h3 id="1-11-JSP-有哪些内置对象？作用分别是什么？"><a href="#1-11-JSP-有哪些内置对象？作用分别是什么？" class="headerlink" title="1.11 JSP 有哪些内置对象？作用分别是什么？"></a>1.11 JSP 有哪些内置对象？作用分别是什么？</h3><p>JSP 共有以下 9 个内置的对象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">request：用户端请求，此请求会包含来自 GET/POST 请求的参数；</span><br><span class="line">response：表示一次响应对象；</span><br><span class="line">pageContext：表示当前的 JSP 对象；</span><br><span class="line">session：表示一次会话对象；</span><br><span class="line">application：表示当前应用对象；</span><br><span class="line">out：表示一个输出流对象；</span><br><span class="line">config：表示当前 JSP 的配置对象；</span><br><span class="line">page：表示当前页面；</span><br><span class="line">exception：表示异常对象。</span><br></pre></td></tr></table></figure>
<h3 id="1-12-JSTL-是什么？优点有哪些？"><a href="#1-12-JSTL-是什么？优点有哪些？" class="headerlink" title="1.12 JSTL 是什么？优点有哪些？"></a>1.12 JSTL 是什么？优点有哪些？</h3><p><code>JSTL</code>（<code>JSP StandardTagLibrary</code>，<code>JSP标准标签库</code>)是一个不断完善的开放源代码的<code>JSP</code>标签库，由四个定制标记库（<code>core</code>、<code>format</code>、<code>xml</code>和<code>sql</code>）和一对通用标记库验证器（<code>ScriptFreeTLV</code>和<code>PermittedTaglibsTLV</code>）组成。优点有：</p>
<p>（1）在应用程序服务器之间提供了一致的接口，最大程序地提高了WEB应用在各应用服务器之间的移植。</p>
<p>（2）简化了JSP和WEB应用程序的开发。</p>
<p>（3）以一种统一的方式减少了JSP中的scriptlet代码数量，可以达到没有任何scriptlet代码的程序。在我们公司的项目中是不允许有任何的scriptlet代码出现在JSP中。</p>
<p>（4）允许JSP设计工具与WEB应用程序开发的进一步集成。相信不久就会有支持JSTL的IDE开发工具出现。</p>
<h3 id="1-13-什么是-Cookie？Session-和-Cookie-有什么区别？"><a href="#1-13-什么是-Cookie？Session-和-Cookie-有什么区别？" class="headerlink" title="1.13 什么是 Cookie？Session 和 Cookie 有什么区别？"></a>1.13 什么是 Cookie？Session 和 Cookie 有什么区别？</h3><p><strong>Cookie 技术</strong></p>
<p>Cookie 是一种会话技术，用于将用户的信息保存在客户端上。Cookie 英文直接翻译过来就是小甜品，Cookie 的作用呢，通俗的说就是当一个用户通过 HTTP 访问一个服务器时，这个服务器会将一些 Key/Value 键值对返回给客户端浏览器，并给这些数据加上一些限制条件，在条件符合时这个用户下次访问这个服务器时，数据又被完整地带回给服务器。</p>
<p>这个作用就像是你去超市购物时，第一次给你办了一张购物卡，在这个购物卡里存放了一些你的个人信息，下次你再来这个超市的时候，你就只需要带上你的购物卡，直接购物就好了。</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/07cookie.png?raw=true" alt="07cookie.png"></p>
<p><strong>Session 技术</strong></p>
<p>Session：会话，从浏览器打开开始，直到浏览器关闭结束，无论在这个网站中访问了多少页面，点击了多少链接，都属于同一个会话。Session 也可以称为会话 Cookie</p>
<ul>
<li>特点：服务端技术，将数据保存在服务器</li>
</ul>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/08session.png?raw=true" alt="08session.png"></p>
<p><strong>Cookie 与 Session 的区别</strong></p>
<ul>
<li>Cookie 的数据是存放在客户的浏览器上，Session 数据放在服务器上；</li>
<li>Cookie 不是很安全，别人可以分析存放在本地的 Cookie 并进行 Cookie 欺骗，如果考虑安全问题则应当使用 Session；</li>
<li>Session 会在一定时间内保存在服务器上，当访问增多，会比较占用服务器的资源，所以如果考虑性能问题，则应当使用 Cookie；</li>
<li>单个 Cookie 在客户端的限制是 3k ，就是说一个站点在客户端存放的 Cookie 不能超过 3k。</li>
</ul>
<p><strong>总结：</strong> 将登录信息等重要信息存放为 Session；其他信息如果需要保留，可以存放在 Cookie 中。</p>
<h3 id="1-14-什么是过滤器？"><a href="#1-14-什么是过滤器？" class="headerlink" title="1.14 什么是过滤器？"></a>1.14 什么是过滤器？</h3><p><strong>过滤器就是 Servlet 的高级特性之一，</strong>就是一个具有<strong>拦截/过滤</strong>功能的一个东西，在生活中过滤器可以是香烟滤嘴，滤纸，净水器，空气净化器等，在 Web 中仅仅是一个<strong>实现了 Filter 接口的 Java 类</strong>而已。</p>
<p><strong>特点</strong>：双向，拦截请求，拦截响应</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/09%E8%BF%87%E6%BB%A4%E5%99%A8.png?raw=true" alt="09è¿æ&quot;¤å¨.png"></p>
<p><strong>作用：</strong>过滤器可以对<strong>所有的请求或者响应做拦截操作</strong></p>
<h3 id="1-15-为什么在-Web-开发中需要用到过滤器？"><a href="#1-15-为什么在-Web-开发中需要用到过滤器？" class="headerlink" title="1.15 为什么在 Web 开发中需要用到过滤器？"></a>1.15 为什么在 Web 开发中需要用到过滤器？</h3><p>为什么非得使用过滤器，我直接在 Servlet 中作判断不行吗？</p>
<p><strong>开发遵循的原则：</strong></p>
<p><strong>（1）DRY原则（Don’t Reeat Yourself，不要重复你自己）</strong>：重复，意味着维护的成本很高。</p>
<p><strong>（2）责任分离原则：</strong>谁擅长什么功能就做什么功能，Servlet 擅长的是逻辑而不是处理请求。</p>
<p>举一个实际的例子：（处理 POST 请求中文编码的问题）</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/10%E8%BF%87%E6%BB%A4%E5%99%A8.png?raw=true" alt="10è¿æ&quot;¤å¨.png"></p>
<p><strong>Web 中过滤器的作用：</strong></p>
<p>（1）可以在请求资源之前设置请求的编码</p>
<p>（2）可以进行登录校验</p>
<p>（3）可以进行请求参数的内容的过滤</p>
<p>（4）数据压缩 / 数据加密 / 数据格式的转换</p>
<p>（5）可以设置浏览器相关的数据</p>
<h3 id="1-16-MVC-模式？"><a href="#1-16-MVC-模式？" class="headerlink" title="1.16 MVC 模式？"></a>1.16 MVC 模式？</h3><p>MVC模式（Model-View-Controller）是<a href="https://link.jianshu.com/?t=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fzh.wikipedia.org%2Fwiki%2F%2525E8%2525BD%2525AF%2525E4%2525BB%2525B6%2525E5%2525B7%2525A5%2525E7%2525A8%25258B" target="_blank" rel="noopener">软件工程</a>中的一种<a href="https://link.jianshu.com/?t=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fzh.wikipedia.org%2Fwiki%2F%2525E8%2525BD%2525AF%2525E4%2525BB%2525B6%2525E6%25259E%2525B6%2525E6%25259E%252584" target="_blank" rel="noopener">软件架构</a>模式，把软件系统分为三个基本部分：模型（Model）、视图（View）和控制器（Controller）：</p>
<ul>
<li>Controller——负责转发请求，对请求进行处理</li>
<li>View——负责界面显示</li>
<li>Model——业务功能编写（例如算法实现）、数据库设计以及数据存取操作实现</li>
</ul>
<p>在JSP/Servlet开发的软件系统中，这三个部分的描述如下所示：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/11MVC.png?raw=true" alt="11MVC.png"></p>
<p>（1）Web浏览器发送HTTP请求到服务端，被Controller(Servlet)获取并进行处理（例如参数解析、请求转发）</p>
<p>（2）Controller(Servlet)调用核心业务逻辑——Model部分，获得结果</p>
<p>（3）Controller(Servlet)将逻辑处理结果交给View（JSP），动态输出HTML内容</p>
<p>（4）动态生成的HTML内容返回到浏览器显示。</p>
<p>MVC模式在Web开发中的好处是非常明显，它规避了JSP与Servlet各自的短板，Servlet只负责业务逻辑而不会通过out.append()动态生成HTML代码；JSP中也不会充斥着大量的业务代码。这大大提高了代码的可读性和可维护性。</p>
<h2 id="2-框架相关知识点"><a href="#2-框架相关知识点" class="headerlink" title="2. 框架相关知识点"></a>2. 框架相关知识点</h2><h3 id="2-1-什么是框架？"><a href="#2-1-什么是框架？" class="headerlink" title="2.1 什么是框架？"></a>2.1 什么是框架？</h3><p>框架是指完成一定功能的半成品。</p>
<p>框架能够帮助我们完成的是：项目的整体框架、一些基础功能、规定了类和对象如何创建，如何协作等，当我们开发一个项目时，框架帮助我们完成了一部分功能，我们自己再完成一部分，那这个项目就完成了。 </p>
<h3 id="2-2-什么是Spring"><a href="#2-2-什么是Spring" class="headerlink" title="2.2 什么是Spring"></a>2.2 什么是Spring</h3><p>Spring 是个java企业级应用的开源开发框架。Spring主要用来开发Java应用，但是有些扩展是针对构建J2EE平台的web应用。Spring 框架目标是简化Java企业级应用开发。</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/12Spring.png?raw=true" alt="12Spring.png"></p>
<ul>
<li><p><strong>Data Access/Integration层</strong>包含有JDBC、ORM、OXM、JMS和Transaction模块。</p>
</li>
<li><p><strong>Web层</strong>包含了Web、Web-Servlet、WebSocket、Web-Porlet模块。</p>
</li>
<li><p><strong>AOP模块</strong>提供了一个符合AOP联盟标准的面向切面编程的实现。</p>
</li>
<li><p><strong>Core Container(核心容器)</strong>：包含有Beans、Core、Context和SpEL模块。</p>
</li>
<li><p><strong>Test模块</strong>支持使用JUnit和TestNG对Spring组件进行测试。</p>
</li>
</ul>
<h3 id="2-3-什么是非侵入式设计？"><a href="#2-3-什么是非侵入式设计？" class="headerlink" title="2.3 什么是非侵入式设计？"></a>2.3 什么是非侵入式设计？</h3><p>从框架的角度可以理解为：<strong>无需继承框架提供的任何类</strong><br>这样我们在更换框架时，之前写过的代码几乎可以继续使用。</p>
<h3 id="2-4-Spring-有什么优势？"><a href="#2-4-Spring-有什么优势？" class="headerlink" title="2.4 Spring 有什么优势？"></a>2.4 Spring 有什么优势？</h3><ul>
<li>低侵入 / 低耦合 （降低组件之间的耦合度，实现软件各层之间的解耦）</li>
<li>声明式事务管理（基于切面和惯例）</li>
<li>方便集成其他框架（如MyBatis、Hibernate）</li>
<li>降低 Java 开发难度</li>
<li>Spring 框架中包括了 J2EE 三层的每一层的解决方案（一站式）</li>
</ul>
<h3 id="2-5-Spring-IoC-和-DI-分别是什么？"><a href="#2-5-Spring-IoC-和-DI-分别是什么？" class="headerlink" title="2.5 Spring IoC 和 DI 分别是什么？"></a>2.5 Spring IoC 和 DI 分别是什么？</h3><p><strong>Spring IoC</strong></p>
<p><strong>IoC：Inverse of Control（控制反转）</strong>，读作 <strong>“反转控制”</strong>，更好理解，不是什么技术，而是一种设计思想，就是将原本在程序中手动创建对象的控制权，交由Spring框架来管理。</p>
<ul>
<li><strong>正控</strong>：若要使用某个对象，需要自己去负责对象的创建</li>
<li><strong>反控</strong>：若要使用某个对象，只需要从 Spring 容器中获取需要使用的对象，不关心对象的创建过程，也就是把创建对象的控制权反转给了Spring框架</li>
<li><strong>好莱坞法则</strong>：Don’t call me ,I’ll call you</li>
</ul>
<p><strong>为了便于理解我们这里举一个鲜明的例子：</strong></p>
<p>在现实生活中，人们要用到一样东西的时候，第一反应就是去找到这件东西，比如想喝新鲜橙汁，在没有饮品店的日子里，最直观的做法就是：买果汁机、买橙子，然后准备开水。值得注意的是：这些都是你自己“主动”创造的过程，也就是说一杯橙汁需要你自己创造。</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/13springioc.png?raw=true" alt="13springioc.png"></p>
<p>然而到了今时今日，由于饮品店的盛行，当我们想喝橙汁时，第一想法就转换成了找到饮品店的联系方式，通过电话等渠道描述你的需要、地址、联系方式等，下订单等待，过一会儿就会有人送来橙汁了。</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/14springioc.png?raw=true" alt="14springioc.png"></p>
<p><strong>请注意你并没有“主动”去创造橙汁</strong>，橙汁是由饮品店创造的，而不是你，然而也完全达到了你的要求，甚至比你创造的要好上那么一些。</p>
<p><strong>总结：</strong> 这就是一种控制反转的理念，上述的例子已经很好的说明了问题，我们再来描述一下控制反转的概念：<strong>控制反转是一种通过描述（在 Java 中可以是 XML 或者注解）并通过第三方（Spring）去产生或获取特定对象的方式。</strong></p>
<p><strong>好处：</strong> </p>
<ul>
<li><p>① 降低对象之间的耦合；</p>
</li>
<li><p>② 我们不需要理解一个类的具体实现，只需要知道它有什么用就好了（直接向 IoC 容器拿）</p>
</li>
</ul>
<p><strong>DI</strong></p>
<p><strong>Dependency Injection（依赖注入）</strong>：指 Spring 创建对象的过程中，将对象依赖属性（简单值，集合，对象）通过配置设值给该对象。</p>
<p><strong>两者的区别</strong></p>
<p>IoC 和 DI 其实是同一个概念的不同角度描述，DI 相对 IoC 而言，<strong>明确描述了 “被注入对象依赖 IoC 容器配置依赖对象”</strong>。你也可以简单的理解为：IoC 是目的，是一种思想，而 DI 是手段，是一种设计模式。</p>
<h3 id="2-6-BeanFactory-和-ApplicationContext-的区别"><a href="#2-6-BeanFactory-和-ApplicationContext-的区别" class="headerlink" title="2.6 BeanFactory 和 ApplicationContext 的区别"></a>2.6 BeanFactory 和 ApplicationContext 的区别</h3><p><strong>BeanFactory：</strong></p>
<p>是Spring中最底层的接口，只提供了最简单的IoC功能,负责配置，创建和管理bean。在应用中，一般不使用 BeanFactory，而推荐使ApplicationContext（应用上下文），原因如下。</p>
<p><strong>ApplicationContext：</strong></p>
<p>（1）继承了 BeanFactory，拥有了基本的 IoC 功能；</p>
<p>（2）除此之外，ApplicationContext 还提供了以下功能：</p>
<ul>
<li>① 支持国际化；</li>
<li>② 支持消息机制；</li>
<li>③ 支持统一的资源加载；</li>
<li>④ 支持AOP功能；</li>
</ul>
<p><strong>注意：</strong> ApplicationContext 和 BeanFactory 相比，最主要的区别在于 BeanFactory 是延迟加载，举个例子：如果 Bean 没有完全注入，BeanFactory 加载后，会在你第一次调用 getBean 方法才会抛出异常；而 ApplicationContext 会在初始化的时候就加载并且检查，这样的好处是可以及时检查依赖是否完全注入；所以通常我们会选择 ApplicationContext。</p>
<h3 id="2-7-IoC-是如何实现的"><a href="#2-7-IoC-是如何实现的" class="headerlink" title="2.7 IoC 是如何实现的"></a>2.7 IoC 是如何实现的</h3><p>最后我们简单说说IoC是如何实现的。想象一下如果我们自己来实现这个依赖注入的功能，我们怎么来做？ 无外乎：</p>
<p>（1）读取标注或者配置文件，看看JuiceMaker依赖的是哪个Source，拿到类名。</p>
<p>（2）使用反射的API，基于类名实例化对应的对象实例。</p>
<p>（3）将对象实例，通过构造函数或者 setter，传递给 JuiceMaker。</p>
<p>我们发现其实自己来实现也不是很难，Spring实际也就是这么做的。这么看的话其实IoC就是一个工厂模式的升级版！当然要做一个成熟的IoC框架，还是非常多细致的工作要做，Spring不仅提供了一个已经成为业界标准的Java IoC框架，还提供了更多强大的功能，所以大家就别去造轮子啦！希望了解IoC更多实现细节不妨通过学习Spring的源码来加深理解！</p>
<h3 id="2-8-Spring-配置-Bean-有几种方式？"><a href="#2-8-Spring-配置-Bean-有几种方式？" class="headerlink" title="2.8 Spring 配置 Bean 有几种方式？"></a>2.8 Spring 配置 Bean 有几种方式？</h3><p>在 Spring 中提供了 3 种方法进行配置：</p>
<ul>
<li>在 XML 文件中显式配置</li>
<li>在 Java 的接口和类中实现配置</li>
<li>隐式 Bean 的发现机制和自动装配原则</li>
</ul>
<p><strong>方式选择的原则</strong></p>
<p>在现实的工作中，这 3 种方式都会被用到，并且在学习和工作之中常常混合使用，所以这里给出一些关于这 3 种优先级的建议：</p>
<p><strong>（1）最优先：</strong>通过隐式 Bean 的发现机制和自动装配的原则。</p>
<p>基于约定优于配置的原则，这种方式应该是最优先的。</p>
<p><strong>好处：</strong>减少程序开发者的决定权，简单又不失灵活。</p>
<p><strong>（2）其次：</strong>Java 接口和类中配置实现配置</p>
<p>在没有办法使用自动装配原则的情况下应该优先考虑此类方法。</p>
<p><strong>好处：</strong>避免 XML 配置的泛滥，也更为容易。</p>
<p><strong>典型场景：</strong>一个父类有多个子类，比如学生类有两个子类，一个男学生类和女学生类，通过 IoC 容器初始化一个学生类，容器将无法知道使用哪个子类去初始化，这个时候可以使用 Java 的注解配置去指定。</p>
<p><strong>（3）最后：</strong>XML 方式配置</p>
<p>在上述方法都无法使用的情况下，那么也只能选择 XML 配置的方式。</p>
<p><strong>好处：</strong>简单易懂（当然，特别是对于初学者）</p>
<p><strong>典型场景：</strong>当使用第三方类的时候，有些类并不是我们开发的，我们无法修改里面的代码，这个时候就通过 XML 的方式配置使用了。</p>
<h3 id="2-9-介绍一下-Spring-AOP"><a href="#2-9-介绍一下-Spring-AOP" class="headerlink" title="2.9 介绍一下 Spring AOP"></a>2.9 介绍一下 Spring AOP</h3><p><strong>AOP 即 Aspect Oriented Program 面向切面编程</strong>，在面向切面编程的思想里面，把功能分为核心业务功能，和周边功能。</p>
<p><strong>所谓的核心业务</strong>，比如登陆，增加数据，删除数据都叫核心业务</p>
<p><strong>所谓的周边功能</strong>，比如性能统计，日志，事务管理等等</p>
<p>周边功能在 Spring 的面向切面编程AOP思想里，即被定义为切面</p>
<p>在面向切面编程AOP的思想里面，核心业务功能和切面功能分别独立进行开发，然后把切面功能和核心业务功能 “编织” 在一起，这就叫 AOP。</p>
<p><strong>一个鲜明的例子：</strong></p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/15AOP.png?raw=true" alt="15AOP.png"></p>
<p>在上面的例子中，包租婆的核心业务就是签合同，收房租，那么这就够了，灰色框起来的部分都是重复且边缘的事，交给中介商就好了，这就是 AOP 的一个思想：<strong>让关注点代码与业务代码分离！</strong></p>
<h3 id="2-10-Spring-中-Bean-的作用域"><a href="#2-10-Spring-中-Bean-的作用域" class="headerlink" title="2.10 Spring 中 Bean 的作用域"></a>2.10 Spring 中 Bean 的作用域</h3><p><strong>在默认的情况下，Spring IoC 容器只会对一个 Bean 创建一个实例</strong>，但有时候，我们希望能够通过 Spring IoC 容器获取多个实例，我们可以通过 <code>@Scope</code> 注解或者 <code>&lt;bean&gt;</code> 元素中的 <code>scope</code> 属性来设置，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// XML 中设置作用域</span></span><br><span class="line">&lt;bean id=<span class="string">""</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">""</span> scope=<span class="string">"prototype"</span> /&gt;</span><br><span class="line"><span class="comment">// 使用注解设置作用域</span></span><br><span class="line"><span class="meta">@Scope</span>(ConfigurableBeanFactory.SCOPE_PROTOTYPE)</span><br></pre></td></tr></table></figure>
<p>Spring 提供了 5 种作用域，它会根据情况来决定是否生成新的对象：</p>
<table>
<thead>
<tr>
<th style="text-align:left">作用域类别</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">singleton(单例)</td>
<td style="text-align:left">在Spring IoC容器中仅存在一个Bean实例 （默认的scope）</td>
</tr>
<tr>
<td style="text-align:left">prototype(多例)</td>
<td style="text-align:left">每次从容器中调用Bean时，都返回一个新的实例，即每次调用getBean()时 ，相当于执行new XxxBean()：不会在容器启动时创建对象</td>
</tr>
<tr>
<td style="text-align:left">request(请求)</td>
<td style="text-align:left">用于web开发，将Bean放入request范围 ，request.setAttribute(“xxx”) ， 在同一个request 获得同一个Bean</td>
</tr>
<tr>
<td style="text-align:left">session(会话)</td>
<td style="text-align:left">用于web开发，将Bean 放入Session范围，在同一个Session 获得同一个Bean</td>
</tr>
<tr>
<td style="text-align:left">globalSession(全局会话)</td>
<td style="text-align:left">一般用于 Porlet 应用环境 , 分布式系统存在全局 session 概念（单点登录），如果不是 porlet 环境，globalSession 等同于 Session</td>
</tr>
</tbody>
</table>
<p>在开发中主要使用 <code>scope=&quot;singleton&quot;</code>、<code>scope=&quot;prototype&quot;</code>，<strong>对于MVC中的Action使用prototype类型，其他使用singleton</strong>，Spring容器会管理 Action 对象的创建,此时把 Action 的作用域设置为 prototype.</p>
<h3 id="2-11-Spring-MVC-的请求流程"><a href="#2-11-Spring-MVC-的请求流程" class="headerlink" title="2.11 Spring MVC 的请求流程"></a>2.11 Spring MVC 的请求流程</h3><p>每当用户在 Web 浏览器中点击链接或者提交表单的时候，请求就开始工作了，像是邮递员一样，从离开浏览器开始到获取响应返回，它会经历很多站点，在每一个站点都会留下一些信息同时也会带上其他信息，下图为 Spring MVC 的请求流程：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/16SpringMVC%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B.png?raw=true" alt="16SpringMVCè¯·æ±æµç¨.png"></p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/17SpringMVC%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B.png?raw=true" alt="17SpringMVCè¯·æ±æµç¨.png"></p>
<p><strong>第一站：DispatcherServlet</strong></p>
<p>从请求离开浏览器以后，第一站到达的就是 DispatcherServlet，看名字这是一个 Servlet，通过 J2EE 的学习，我们知道 Servlet 可以拦截并处理 HTTP 请求，DispatcherServlet 会拦截所有的请求，并且将这些请求发送给 Spring MVC 控制器。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">servlet&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 拦截所有的请求 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>DispatcherServlet 的任务就是拦截请求发送给 Spring MVC 控制器。</p>
<p><strong>第二站：处理器映射（HandlerMapping）</strong></p>
<p><strong>问题：</strong>典型的应用程序中可能会有多个控制器，这些请求到底应该发给哪一个控制器呢？</p>
<p>所以 DispatcherServlet 会查询一个或多个处理器映射来确定请求的下一站在哪里，处理器映射会<strong>根据请求所携带的 URL 信息来进行决策</strong>，例如上面的例子中，我们通过配置 simpleUrlHandlerMapping 来将 /hello 地址交给 helloController 处理：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"simpleUrlHandlerMapping"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mappings"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- /hello 路径的请求交给 id 为 helloController 的控制器处理--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"/hello"</span>&gt;</span>helloController<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"helloController"</span> <span class="attr">class</span>=<span class="string">"controller.HelloController"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>第三站：控制器</strong></p>
<p>一旦选择了合适的控制器， DispatcherServlet 会将请求发送给选中的控制器，到了控制器，请求会卸下其负载（用户提交的请求）等待控制器处理完这些信息：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(javax.servlet.http.HttpServletRequest httpServletRequest, javax.servlet.http.HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 处理逻辑</span></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>第四站：返回 DispatcherServlet</strong></p>
<p>当控制器在完成逻辑处理后，通常会产生一些信息，这些信息就是需要返回给用户并在浏览器上显示的信息，它们被称为<strong>模型（Model）</strong>。仅仅返回原始的信息时不够的——这些信息需要以用户友好的方式进行格式化，一般会是 HTML，所以，信息需要发送给一个<strong>视图（view）</strong>，通常会是 JSP。</p>
<p>控制器所做的最后一件事就是将模型数据打包，并且表示出用于渲染输出的视图名<strong>（逻辑视图名）。它接下来会将请求连同模型和视图名发送回 DispatcherServlet。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(javax.servlet.http.HttpServletRequest httpServletRequest, javax.servlet.http.HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 处理逻辑</span></span><br><span class="line">    ....</span><br><span class="line">    <span class="comment">// 返回给 DispatcherServlet</span></span><br><span class="line">    <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>第五站：视图解析器</strong></p>
<p>这样以来，控制器就不会和特定的视图相耦合，传递给 DispatcherServlet 的视图名并不直接表示某个特定的 JSP。（实际上，它甚至不能确定视图就是 JSP）相反，<strong>它传递的仅仅是一个逻辑名称，这个名称将会用来查找产生结果的真正视图。</strong></p>
<p>DispatcherServlet 将会使用视图解析器（view resolver）来将逻辑视图名匹配为一个特定的视图实现，它可能是也可能不是 JSP。</p>
<p><strong>第六站：视图</strong></p>
<p>既然 DispatcherServlet 已经知道由哪个视图渲染结果了，那请求的任务基本上也就完成了。</p>
<p>它的最后一站是视图的实现，在这里它交付模型数据，请求的任务也就完成了。视图使用模型数据渲染出结果，这个输出结果会通过响应对象传递给客户端。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">         pageEncoding=<span class="string">"UTF-8"</span> isELIgnored=<span class="string">"false"</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;$&#123;message&#125;&lt;/h1&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-12-Spring-MVC-的架构"><a href="#2-12-Spring-MVC-的架构" class="headerlink" title="2.12 Spring MVC 的架构"></a>2.12 Spring MVC 的架构</h3><p>为解决持久层中一直未处理好的数据库事务的编程，又为了迎合 NoSQL 的强势崛起，Spring MVC 给出了方案：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/18SpringMVC%E6%9E%B6%E6%9E%84.png?raw=true" alt="18SpringMVCæ¶æ.png"></p>
<p><strong>传统的模型层被拆分为了业务层(Service)和数据访问层（DAO,Data Access Object）。</strong>在 Service 下可以通过 Spring 的声明式事务操作数据访问层，而在业务层上还允许我们访问 NoSQL ，这样就能够满足异军突起的 NoSQL 的使用了，它可以大大提高互联网系统的性能。</p>
<p><strong>特点：</strong></p>
<ul>
<li>结构松散，几乎可以在 Spring MVC 中使用各类视图</li>
<li>松耦合，各个模块分离</li>
<li>与 Spring 无缝集成</li>
</ul>
<h3 id="2-13-什么是-ORM？"><a href="#2-13-什么是-ORM？" class="headerlink" title="2.13 什么是 ORM？"></a>2.13 什么是 ORM？</h3><p>对象关系映射（Object-Relational Mapping，简称ORM）是一种为了解决程序的面向对象模型与数据库的关系模型互不匹配问题的技术；</p>
<p>简单的说，ORM是通过使用描述对象和数据库之间映射的元数据（在Java中可以用XML或者是注解），将程序中的对象自动持久化到关系数据库中或者将关系数据库表中的行转换成Java对象，其本质上就是将数据从一种形式转换到另外一种形式。</p>
<h3 id="2-14-为什么要使用-MyBatis-？"><a href="#2-14-为什么要使用-MyBatis-？" class="headerlink" title="2.14 为什么要使用 MyBatis ？"></a>2.14 为什么要使用 MyBatis ？</h3><p>在我们<strong>传统的 JDBC</strong> 中，我们除了需要自己提供 SQL 外，还必须操作 Connection、Statment、ResultSet，不仅如此，为了访问不同的表，不同字段的数据，我们需要些很多雷同模板化的代码，闲的繁琐又枯燥。</p>
<p>而我们在使用了 <strong>MyBatis</strong> 之后，<strong>只需要提供 SQL 语句就好了</strong>，其余的诸如：建立连接、操作 Statment、ResultSet，处理 JDBC 相关异常等等都可以交给 MyBatis 去处理，<strong>我们的关注点于是可以就此集中在 SQL 语句上</strong>，关注在增删改查这些操作层面上。</p>
<p>并且 MyBatis 支持使用简单的 XML 或注解来配置和映射原生信息，将接口和 Java 的 POJOs(Plain Old Java Objects,普通的 Java对象)映射成数据库中的记录。</p>
<h3 id="2-15-MyBatis-中占位符-和-的区别"><a href="#2-15-MyBatis-中占位符-和-的区别" class="headerlink" title="2.15 MyBatis 中占位符 # 和 `###  的区别"></a>2.15 MyBatis 中占位符 <code>#</code> 和 `###  的区别</h3><p><strong>区别如下：</strong></p>
<ol>
<li><code>#</code>符号将传入的数据都当做一个字符串，会对自动传入的数据加一个双引号</li>
<li><code>#</code>符号存在预编译的过程，，对问号赋值，防止SQL注入。</li>
<li><code>$</code>符号将传入的数据直接显示生成SQL中。</li>
<li><code>$</code>符号是直译的方式，一般用在order by {列名} 语句中。</li>
<li>能用<code>#</code>号就不要用<code>$</code>符号</li>
</ol>
<h3 id="2-16-MyBatis-缓存结构"><a href="#2-16-MyBatis-缓存结构" class="headerlink" title="2.16 MyBatis 缓存结构"></a>2.16 MyBatis 缓存结构</h3><p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/19mybatis%E7%BC%93%E5%AD%98.png?raw=true" alt="19mybatisç¼å­.png"></p>
<p>在 Web 系统中，最重要的操作就是查询数据库中的数据。但是有些时候查询数据的频率非常高，这是很耗费数据库资源的，往往会导致数据库查询效率极低，影响客户的操作体验。于是我们可以将一些变动不大且访问频率高的数据，放置在一个缓存容器中，用户下一次查询时就从缓存容器中获取结果。</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/20mybatis%E7%BC%93%E5%AD%98.png?raw=true" alt="20mybatisç¼å­.png"></p>
<ul>
<li><p>MyBatis 拥有自己的缓存结构，可以用来缓解数据库压力，加快查询速度。</p>
</li>
<li><p>MyBatis 一级缓存是一个 SqlSession 级别，同一个 SqlSession 只能访问自己的一级缓存的数据</p>
</li>
<li><p>二级缓存是跨sqlSession，是 mapper 级别的缓存，对于 mapper 级别的缓存不同的sqlsession是可以共享的。</p>
</li>
</ul>
<h3 id="2-17-Mybatis添加记录，返回主键id"><a href="#2-17-Mybatis添加记录，返回主键id" class="headerlink" title="2.17 Mybatis添加记录，返回主键id"></a>2.17 Mybatis添加记录，返回主键id</h3><p><strong>Role.java实体类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String roleId;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getRoleId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> roleId;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoleId</span><span class="params">(String roleId)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.roleId = roleId;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getStatus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> status;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStatus</span><span class="params">(Integer status)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.status = status;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>SysRoleDao.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysRoleDao</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addRole</span><span class="params">(SysRole role)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>mapper-role.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addRole"</span> <span class="attr">parameterType</span>=<span class="string">"SysRole"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"roleId"</span> <span class="attr">keyColumn</span>=<span class="string">"role_id"</span>&gt;</span></span><br><span class="line">	insert into t_sys_role(</span><br><span class="line">		name,status</span><br><span class="line">	)</span><br><span class="line">	values(</span><br><span class="line">	        #&#123;name,jdbcType=VARCHAR&#125;,</span><br><span class="line">		#&#123;status,jdbcType=VARCHAR&#125;,</span><br><span class="line">	)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong></p>
<ol>
<li>添加记录能够返回主键的关键点在于需要在<code>&lt;insert&gt;</code>标签中添加以下三个属性<code>&lt;insert useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot; keyColumn=&quot;id&quot;&gt;&lt;/insert&gt;</code>。<br><code>useGeneratedKeys</code>：必须设置为true，否则无法获取到主键id。<br><code>keyProperty</code>：设置为POJO对象的主键id属性名称。<br><code>keyColumn</code>：设置为数据库记录的主键id字段名称</li>
<li>mapper接口返回值依然是成功插入的记录数，新添加主键id并不是在执行添加操作时直接返回的，而是在执行添加操作之后将新添加记录的主键id字段设置为POJO对象的主键id属性。</li>
</ol>
<p>另一种是数据库（如Oracle）不支持auto-generated key field的。需要使用selectKey操作将操作查询结果赋值到insert元素的parameterType的入参实例下对应的属性中。并提供给insert语句使用。</p>
<p><strong>TestDao.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(locations= &#123;<span class="string">"classpath:config/spring-core.xml"</span>,<span class="string">"classpath:config/spring-web.xml"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDao</span></span>&#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	SysRoleDao roleDao;</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		SysRole role=<span class="keyword">new</span> SysRole();</span><br><span class="line">		role.setName(<span class="string">"admin10"</span>);</span><br><span class="line">		role.setStatus(<span class="number">1</span>);</span><br><span class="line">		System.out.println(<span class="string">"返回结果:"</span>+roleDao.addRole(role));</span><br><span class="line">		System.out.println(<span class="string">"主键id:"</span>+role.getRoleId());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>打印结果:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">返回结果:1</span><br><span class="line">主键id:12</span><br></pre></td></tr></table></figure>
<h3 id="2-18-什么是-Spring-Boot-？"><a href="#2-18-什么是-Spring-Boot-？" class="headerlink" title="2.18 什么是 Spring Boot ？"></a>2.18 什么是 Spring Boot ？</h3><ul>
<li>它并不是什么新的框架，而是默认配置了很多框架的使用方式，就像 Maven 整合了所有的 jar 包一样，Spring Boot 整合了所有框架。</li>
<li>它使用 <strong>“习惯优于配置”</strong> （项目中存在大量的配置，此外还内置一个习惯性的配置，让你无须）的理念让你的项目快速运行起来。</li>
</ul>
<h3 id="2-19-使用-Spring-Boot-有什么好处？"><a href="#2-19-使用-Spring-Boot-有什么好处？" class="headerlink" title="2.19 使用 Spring Boot 有什么好处？"></a>2.19 使用 Spring Boot 有什么好处？</h3><p>回顾我们之前的 SSM 项目，搭建过程还是比较繁琐的，需要：</p>
<p>（1）配置 web.xml，加载 spring 和 spring mvc</p>
<p>（2）配置数据库连接、配置日志文件</p>
<p>（3）配置加在配置文件的读取，开启注解</p>
<p>（4）配置mapper文件</p>
<p>而使用 Spring Boot 来开发项目则只需要非常少的几个配置就可以搭建起来一个 Web 项目，并且利用 IDEA 可以自动生成生成，这简直是太爽了…</p>
<p><strong>好处</strong>：简单、快速、方便地搭建项目；对主流开发框架的无配置集成；极大提高了开发、部署效率。</p>
<h3 id="2-20-分页功能"><a href="#2-20-分页功能" class="headerlink" title="2.20 分页功能"></a>2.20 分页功能</h3><p>分页功能在网页中是非常常见的一个功能，<strong>其作用也就是将数据分割成多个页面来进行显示。</strong></p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/21%E5%88%86%E9%A1%B5.png?raw=true" alt="21åé¡µ.png"></p>
<p><strong>使用场景：</strong> 当取到的数据量达到一定的时候，就需要使用分页来进行数据分割。</p>
<p>当我们不使用分页功能的时候，会面临许多的问题：</p>
<ul>
<li><strong>客户端的问题：</strong> 如果数据量太多，都显示在同一个页面的话，会因为页面太长<strong>严重影响到用户的体验，也不便于操作</strong>，也会出现<strong>加载太慢</strong>的问题。</li>
<li><strong>服务端的问题：</strong> 如果数据量太多，可能会造成<strong>内存溢出</strong>，而且一次请求携带的数据太多，<strong>对服务器的性能也是一个考验。</strong></li>
</ul>
<p><strong>分页的分类</strong></p>
<p>分页的实现分为真分页和假分页两种，也就是物理分页和逻辑分页。</p>
<p><strong>（1）真分页（物理分页）：</strong></p>
<p><strong>实现原理：</strong> <code>SELECT * FROM xxx [WHERE...] LIMIT #{param1}, #{param2}</code></p>
<ul>
<li>第一个参数是开始数据的索引位置</li>
<li>第二个参数是要查询多少条数据</li>
</ul>
<p><strong>优点：</strong> 不会造成内存溢出</p>
<p><strong>缺点：</strong> 翻页的速度比较慢</p>
<p><strong>（2）假分页（逻辑分页）：</strong></p>
<p><strong>实现原理： 一次性将所有的数据查询出来放在内存之中</strong>，每次需要查询的时候就直接从内存之中去取出相应索引区间的数据</p>
<p><strong>优点：</strong> 分页的速度比较快</p>
<p><strong>缺点：</strong> 可能造成内存溢出</p>
<p><strong>传统的分页方式</strong></p>
<p>对于假分页的实现方式很简单，只需要准备一个集合保存从数据库中取出的所有数据，然后根据当前页面的码数，取出对应范围的数据显示就好了，<strong>我们这里基于物理分页来实现。</strong></p>
<p><strong>分页的原理</strong></p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/22%E5%88%86%E9%A1%B5.png?raw=true" alt="22åé¡µ.png"></p>
<p><strong>页面中的数据有：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">结果集：通过 SQL 语句查询得来的——List&lt;Student&gt;</span><br></pre></td></tr></table></figure>
<p><strong>分页条中的数据有：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">当前页：用户传递到后台——currentPage</span><br><span class="line">总页数：计算的来——totalPage</span><br><span class="line">上一页：计算的来——prePage</span><br><span class="line">下一页：计算的来——nextPage</span><br><span class="line">尾页：计算的来（总页数）——lastPage</span><br><span class="line">页面大小（即每一页显示的条数）：用户传递到后台——count</span><br><span class="line">总条数：通过 SQL 语句查询得来的——totalCount</span><br></pre></td></tr></table></figure>
<p>可以发现页面功能中需要用到的数据<strong>有两个是需要通过 SQL 语句查询得来</strong>的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">一个是页面中显示的数据 List&lt;Student&gt;，</span><br><span class="line">另一个是数据的总条数 totalCount</span><br></pre></td></tr></table></figure>
<p>分别对应以下两条 SQL 语句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student LIMIT #&#123;param1&#125;, #&#123;param2&#125;</span><br><span class="line">SELECT COUNT(*) FROM student</span><br></pre></td></tr></table></figure>
<p>通过计算得到的数据有：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">总页数：totalPage</span><br><span class="line">总页数 = 总条数 % 页面大小 == 0 ? 总条数 / 页面大小 : 总条数 / 页面大小 + 1</span><br><span class="line"></span><br><span class="line">上一页：prePage</span><br><span class="line">上一页 = 当前页 - 1 &gt; = 1 ? 当前页 - 1 : 1</span><br><span class="line"></span><br><span class="line">下一页：nextPage</span><br><span class="line">下一页 = 当前页 + 1 &lt;= totalPage ? 当前页 + 1 : totalPage</span><br><span class="line"></span><br><span class="line">尾页：lastPage</span><br><span class="line">尾页 = 总条数 % 页面大小 == 0 ？ 总条数 - 页面大小 : 总条数 - 总条数 % 页面大小</span><br></pre></td></tr></table></figure>
<p>用户传递的数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当前页：currentPage</span><br><span class="line">页面大小：count</span><br></pre></td></tr></table></figure>
<p>创建一个 Page 工具类备用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Page</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> start;      <span class="comment">// 开始数据的索引</span></span><br><span class="line">    <span class="keyword">int</span> count;      <span class="comment">// 每一页的数量</span></span><br><span class="line">    <span class="keyword">int</span> total;      <span class="comment">// 总共的数据量</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 提供一个构造方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> count</span></span><br><span class="line"><span class="comment">     */</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Page</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.start = start;</span><br><span class="line">        <span class="keyword">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断是否有上一页</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isHasPreviouse</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(start==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断是否有下一页</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isHasNext</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(start==getLast())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算得到总页数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTotalPage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> totalPage;</span><br><span class="line">        <span class="comment">// 假设总数是50，是能够被5整除的，那么就有10页</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> == total % count)</span><br><span class="line">            totalPage = total /count;</span><br><span class="line">            <span class="comment">// 假设总数是51，不能够被5整除的，那么就有11页</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            totalPage = total / count + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==totalPage)</span><br><span class="line">            totalPage = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> totalPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算得到尾页</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLast</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> last;</span><br><span class="line">        <span class="comment">// 假设总数是50，是能够被5整除的，那么最后一页的开始就是45</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> == total % count)</span><br><span class="line">            last = total - count;</span><br><span class="line">            <span class="comment">// 假设总数是51，不能够被5整除的，那么最后一页的开始就是50</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            last = total - total % count;</span><br><span class="line"></span><br><span class="line">        last = last&lt;<span class="number">0</span>?<span class="number">0</span>:last;</span><br><span class="line">        <span class="keyword">return</span> last;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* getter and setter */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>前台实现分页设计</strong></p>
<p>首先我们在前台需要完成我们分页条的设计，这里可以直接引入 <strong>Bootstrap</strong> 来完成：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/23%E5%88%86%E9%A1%B5.png?raw=true" alt="23åé¡µ.png"></p>
<p><strong>简单版本的分页条</strong></p>
<ul>
<li>首页超链：指向了 start 为 0 的首页</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;</span><br><span class="line">    &lt;a href=<span class="string">"?page.start=0"</span>&gt;</span><br><span class="line">        &lt;span&gt;«&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>上一页超链：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li &gt;</span><br><span class="line">    &lt;a  href=<span class="string">"?page.start=$&#123;page.start-page.count&#125;"</span>&gt;</span><br><span class="line">        &lt;span&gt;‹&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>下一页超链：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li &gt;</span><br><span class="line">    &lt;a href=<span class="string">"?page.start=$&#123;page.start+page.count&#125;"</span>&gt;</span><br><span class="line">        &lt;span&gt;›&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>最后一页超链：指向了最后一页</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li &gt;</span><br><span class="line">    &lt;a href=<span class="string">"?page.start=$&#123;page.last&#125;"</span>&gt;</span><br><span class="line">        &lt;span&gt;»&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>中间页：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach begin=<span class="string">"0"</span> end=<span class="string">"$&#123;page.totalPage-1&#125;"</span> varStatus=<span class="string">"status"</span>&gt;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">        &lt;a href="?page.start=$&#123;status.index*page.count&#125;" class="current"&gt;$&#123;status.count&#125;&lt;/a&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>所以写完看起来会是这样子的：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav&gt;</span><br><span class="line">    &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">"pagination"</span>&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">            &lt;a  href=<span class="string">"?page.start=0"</span>&gt;</span><br><span class="line">                &lt;span&gt;«&lt;/span&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line"></span><br><span class="line">        &lt;li &gt;</span><br><span class="line">            &lt;a  href=<span class="string">"?page.start=$&#123;page.start-page.count&#125;"</span>&gt;</span><br><span class="line">                &lt;span&gt;‹&lt;/span&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line"></span><br><span class="line">        &lt;c:forEach begin=<span class="string">"0"</span> end=<span class="string">"$&#123;page.totalPage-1&#125;"</span> varStatus=<span class="string">"status"</span>&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">                &lt;a href="?page.start=$&#123;status.index*page.count&#125;" class="current"&gt;$&#123;status.count&#125;&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;/c:forEach&gt;</span><br><span class="line"></span><br><span class="line">        &lt;li &gt;</span><br><span class="line">            &lt;a href=<span class="string">"?page.start=$&#123;page.start+page.count&#125;"</span>&gt;</span><br><span class="line">                &lt;span&gt;›&lt;/span&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li &gt;</span><br><span class="line">            &lt;a href=<span class="string">"?page.start=$&#123;page.last&#125;"</span>&gt;</span><br><span class="line">                &lt;span&gt;»&lt;/span&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/nav&gt;</span><br></pre></td></tr></table></figure>
<p><strong>存在的问题：</strong></p>
<ul>
<li>① 没有边界判断，即在首页仍然可以点击前一页，不符合逻辑也影响用户体验</li>
<li>② 会显示完所有的分页，即如果 totalPage 有50页，那么分页栏将会显得特别长，影响体验</li>
</ul>
<p><strong>改良版本的分页条</strong></p>
<p>（1）写好头和尾</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav <span class="class"><span class="keyword">class</span></span>=<span class="string">"pageDIV"</span>&gt;</span><br><span class="line">    &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">"pagination"</span>&gt;</span><br><span class="line">    .....</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/nav&gt;</span><br></pre></td></tr></table></figure>
<p>（2）写好<code>«</code> <code>‹</code>这两个功能按钮</p>
<p>使用 <code>&lt;c:if&gt;</code>标签来增加边界判断，如果没有前面的页码了则设置为disable状态</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;li &lt;c:if test="$&#123;!page.hasPreviouse&#125;"&gt;class="disabled"&lt;/c:if&gt;&gt;</span><br><span class="line">	&lt;a href=<span class="string">"?page.start=0"</span>&gt;</span><br><span class="line">        &lt;span&gt;«&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">&lt;li &lt;c:if test="$&#123;!page.hasPreviouse&#125;"&gt;class="disabled"&lt;/c:if&gt;&gt;</span><br><span class="line">    &lt;a href=<span class="string">"?page.start=$&#123;page.start-page.count&#125;"</span>&gt;</span><br><span class="line">    	&lt;span&gt;‹&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>
<p>（3）再通过 JavaScrip 代码来完成禁用功能：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"ul.pagination li.disabled a"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>（4）完成中间页码的编写</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach begin=<span class="string">"0"</span> end=<span class="string">"$&#123;page.totalPage-1&#125;"</span> varStatus=<span class="string">"status"</span>&gt;</span><br><span class="line">	&lt;c:<span class="keyword">if</span> test=<span class="string">"$&#123;status.count*page.count-page.start&lt;=30 &amp;&amp; status.count*page.count-page.start&gt;=-10&#125;"</span>&gt;</span><br><span class="line">        &lt;li &lt;c:if test="$&#123;status.index*page.count==page.start&#125;"&gt;class="disabled"&lt;/c:if&gt;</span><br><span class="line">    		&lt;a </span><br><span class="line">               href=<span class="string">"?page.start=$&#123;status.index*page.count&#125;"</span></span><br><span class="line">           	&lt;c:if test="$&#123;status.index*page.count==page.start&#125;"&gt;class="current"&lt;/c:if&gt;&gt;</span><br><span class="line">			$&#123;status.count&#125;&lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/c:if&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<p>从 <code>0</code> 循环到 <code>page.totalPage - 1</code> ，<code>varStatus</code> 相当于是循环变量</p>
<ul>
<li>status.count 是从1开始遍历</li>
<li>status.index 是从0开始遍历</li>
</ul>
<p><strong>要求：</strong>显示当前页码的前两个和后两个就可，例如当前页码为3的时候，就显示 1 2 3(当前页) 4 5 的页码</p>
<p><strong>理解测试条件：</strong>-10 &lt;= 当前页*每一页显示的数目 - 当前页开始的数据编号 &lt;= 30</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/25%E5%88%86%E9%A1%B5.png?raw=true" alt="25åé¡µ.png"></p>
<p><strong>后台中的分页</strong></p>
<p>首页在项目中引入上面提到的 Page 工具类，然后我们在 DAO 类中使用 LIMIT 关键字来查询数据库中的信息：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> list(<span class="number">0</span>, Short.MAX_VALUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">list</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    List&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    String sql = <span class="string">"SELECT * FROM student ORDER BY student_id desc limit ?,?"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> (Connection c = DBUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql)) &#123;</span><br><span class="line"></span><br><span class="line">        ps.setInt(<span class="number">1</span>, start);</span><br><span class="line">        ps.setInt(<span class="number">2</span>, count);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取结果集...</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 Servlet 中获取分页参数并使首页显示的 StudentList 用 page 的参数来获取：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取分页参数</span></span><br><span class="line"><span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    start = Integer.parseInt(req.getParameter(<span class="string">"page.start"</span>));</span><br><span class="line">    count = Integer.parseInt(req.getParameter(<span class="string">"page.count"</span>));</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">&#125;</span><br><span class="line">Page page = <span class="keyword">new</span> Page(start, count);</span><br><span class="line"></span><br><span class="line">List&lt;Student&gt; students = studentDAO.list(page.getStart(), page.getCount());</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"></span><br><span class="line"><span class="comment">// 共享数据</span></span><br><span class="line">req.setAttribute(<span class="string">"page"</span>, page);</span><br><span class="line">req.setAttribute(<span class="string">"students"</span>, students);</span><br></pre></td></tr></table></figure>
<p>以上即可完成分页功能，但这是基于 Servlet 的版本。</p>
<p><strong>SSM 中的分页</strong></p>
<p>在 SSM 项目中，我们可以使用 MyBatis 的一款分页插件： PageHelper 来帮助我们更加简单的完成分页的需求，官网在这里： <a href="https://github.com/pagehelper/Mybatis-PageHelper" target="_blank" rel="noopener">PageHelper</a></p>
<p><strong>第一步：添加相关 jar 依赖包</strong></p>
<p>PageHelper 需要依赖两个 jar 包，我们直接在 pom.xml 中增加两个 jar 包依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pageHelper --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.2-beta<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--jsqlparser--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>第二步：配置相关环境</strong></p>
<p>在 MyBatis 的 SessionFactory 配置中新增加一个属性名 plugins 的配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置SqlSessionFactory对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 注入数据库连接池 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 扫描entity包 使用别名 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"cn.wmyskxz.entity"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 扫描sql配置文件:mapper需要的xml文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:mapper/*.xml"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 让MyBatis支持PageHelper插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"plugins"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--使用下面的方式配置参数，一行配置一个 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>第三步：重构项目</strong></p>
<p>首先我们把 LIMIT 关键字从映射文件中干掉：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询从start位置开始的count条数据--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"list"</span> <span class="attr">resultMap</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">    SELECT * FROM student ORDER BY student_id desc</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后注释掉查询数据总条数的 SQL 语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--&amp;lt;!&amp;ndash; 查询数据条目 &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;select id="getTotal" resultType="int"&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--SELECT COUNT(*) FROM student--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;/select&gt;--&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 Dao 类和 Service 类中修改相应的地方：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/24%E5%88%86%E9%A1%B5.png?raw=true" alt="24åé¡µ.png"></p>
<p>然后修改掉 StudentController 中的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/listStudent"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">listStudent</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取分页参数</span></span><br><span class="line">    <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        start = Integer.parseInt(request.getParameter(<span class="string">"page.start"</span>));</span><br><span class="line">        count = Integer.parseInt(request.getParameter(<span class="string">"page.count"</span>));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Page page = <span class="keyword">new</span> Page(start, count);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  使用 PageHelper 来设置分页</span></span><br><span class="line">    PageHelper.offsetPage(page.getStart(),page.getCount());</span><br><span class="line">    List&lt;Student&gt; students = studentService.list();</span><br><span class="line">    <span class="comment">//  使用 PageHelper 来获取总数</span></span><br><span class="line">    <span class="keyword">int</span> total = (<span class="keyword">int</span>) <span class="keyword">new</span> PageInfo&lt;&gt;(students).getTotal();</span><br><span class="line">    page.setTotal(total);</span><br><span class="line"></span><br><span class="line">    request.setAttribute(<span class="string">"students"</span>, students);</span><br><span class="line">    request.setAttribute(<span class="string">"page"</span>, page);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"listStudent"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重启服务器，能看到也能够正确的使用分页功能。</p>
<h3 id="2-21-JSON使用"><a href="#2-21-JSON使用" class="headerlink" title="2.21 JSON使用"></a>2.21 JSON使用</h3><p><strong>什么是JSON</strong></p>
<p>JSON 使用 JavaScript 语法来描述数据对象，但是 JSON 仍然独立于语言和平台。JSON 解析器和 JSON 库支持许多不同的编程语言。</p>
<p>这里有意思的是，JSON本来是用来表示 JavaScript 对象的一种数据文本格式，但由于它轻量级、易于解析/操作（JavaScript原生支持）的一些特点，渐渐的被很多语言支持也就成了一种标准。</p>
<ul>
<li>JSON 指的是 JavaScript 对象表示法（<strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otation）</li>
<li>JSON 是轻量级的文本数据交换格式</li>
<li>JSON 独立于语言 </li>
<li>JSON 具有自我描述性，更易理解</li>
</ul>
<p><strong>为什么使用JSON</strong></p>
<p>在JSON之前，我们通常在网络传输中使用的格式是XML，在我们的印象之中，XML具有很好的可读性，并且格式统一，解析起来也相对比较简单，为什么摒弃掉XML而逐渐的使用起JSON呢？</p>
<p>主要原因在于：<strong>JSON比XML更小、更快、更易解析。</strong></p>
<ul>
<li>JavaScript原生支持JSON，解析速度相较XML会更快；</li>
<li>XML解析成DOM对象的时候，浏览器之间会产生差异【例如IE和FireFox】；</li>
<li>JSON有很多强大的库能够帮助我们更快更简单的完成工作</li>
</ul>
<p><strong>XML与JSON实例比较</strong></p>
<p>我们通过一个实例的比较来真实的说明一下XML与JSON的区别：</p>
<p>（1）使用<code>XML</code>表示中国部分省市的数据如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>中国<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">province</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>黑龙江<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">citys</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>哈尔滨<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>大庆<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">citys</span>&gt;</span>  　　</span><br><span class="line">    <span class="tag">&lt;/<span class="name">province</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">province</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>广东<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">citys</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>广州<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>珠海<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">citys</span>&gt;</span> 　　</span><br><span class="line">    <span class="tag">&lt;/<span class="name">province</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">province</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>台湾<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">citys</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>台北<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>高雄<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">citys</span>&gt;</span>　</span><br><span class="line">    <span class="tag">&lt;/<span class="name">province</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">province</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>新疆<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">citys</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>乌鲁木齐<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">citys</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">province</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>（2）使用<code>JSON</code>中国部分省市数据如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var country =</span><br><span class="line">    &#123;</span><br><span class="line">        name: "中国",</span><br><span class="line">        provinces: [</span><br><span class="line">            &#123; name: "黑龙江", citys: &#123; city: ["哈尔滨", "大庆"]&#125; &#125;,</span><br><span class="line">            &#123; name: "广东", citys: &#123; city: ["广州", "深圳", "珠海"]&#125; &#125;,</span><br><span class="line">            &#123; name: "台湾", citys: &#123; city: ["台北", "高雄"]&#125; &#125;,</span><br><span class="line">            &#123; name: "新疆", citys: &#123; city: ["乌鲁木齐"]&#125; &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>从编码的可读性来说</strong>，<code>XML</code>有明显的优势，毕竟人类的语言更贴近这样的说明结构。而<code>JSON</code>读起来更像是一个数据块，读起来比较费解，不过我们读起来费解的语言，恰恰是适合机器于都的，所以通过<code>JSON</code>是的索引<code>contry.provinces[0].name</code>就可以读取到“黑龙江”这个值</p>
<p><strong>从编码的手写难度来说</strong>，<code>XML</code>还是更简单一些，好读也就意味着好写；不过<code>JSON</code>写出来的字符明显就少很多；去掉空白制表以及换行的话，<code>JSON</code>就是密密麻麻的有用数据，而<code>XML</code>却包含很多重复的标记字符。</p>
<p><strong>JSON相比XML的不同之处</strong></p>
<ul>
<li>没有结束标签</li>
<li>更短</li>
<li>读写的速度更快</li>
<li>能够使用内建的 JavaScript eval() 方法进行解析</li>
<li>使用数组</li>
<li>不使用保留字</li>
</ul>
<p><strong>对于AJAX应用程序员来说，JSON比XML更快更易使用：</strong></p>
<p><strong>使用XML：</strong></p>
<ul>
<li>读取XML文档</li>
<li>使用XML DOM来循环遍历文档</li>
<li>读取值并存储在变量中</li>
</ul>
<p><strong>使用JSON：</strong></p>
<ul>
<li>读取JSON字符串</li>
<li>用 eval() 处理JSON字符串</li>
</ul>
<p><strong>JSON语法</strong></p>
<p><strong>客户端与服务器交换的数据无非就是两种：</strong> <strong>数组</strong>或者是<strong>对象</strong>，JSON所表示的数据也就是这两种了</p>
<p>JSON语法是JavaScript语法的子集，<strong>在JavaScript中用[]中括号来表示数组，用{}大括号来表示对象，JSON也是这样</strong></p>
<p><strong>JSON数组：</strong></p>
<p><code>[]</code>中括号里面的内容有些像ArrayList，是一个列表一样的东西</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var employees = [</span><br><span class="line">    &#123; "firstName":"Bill" , "lastName":"Gates" &#125;,</span><br><span class="line">    &#123; "firstName":"George" , "lastName":"Bush" &#125;,</span><br><span class="line">    &#123; <span class="attr">"firstName"</span>:<span class="string">"Thomas"</span> , <span class="attr">"lastName"</span>: <span class="string">"Carter"</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p><strong>JSON对象：</strong></p>
<p><code>{}</code>大括号里面的东西有些像Map，是一对一对的键值对</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line"></span><br><span class="line">    age:20,</span><br><span class="line">    str:"aimanyeye",</span><br><span class="line">    method:function() &#123;</span><br><span class="line">        alert("我爱学习");</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong><code>[]</code>中括号和<code>{}</code>大括号之间是可以相互嵌套的</p>
<p><strong>解析JSON</strong></p>
<p>在解析JSON对象之前，我们需要首先地来创造一个JSON对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> JASONObject = &#123;<span class="string">"name"</span>: <span class="string">"艾曼爷爷"</span>, <span class="string">"age"</span>: <span class="number">21</span>&#125;;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>使用HTML解析</strong></p>
<p>在HTML中我们可以直接使用<code>.</code>点号来直接访问JSON对象的属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;<span class="built_in">JSON</span>学习&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">    Name:<span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line">    Age:&lt;span id="age"&gt;&lt;/span&gt;&lt;br&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var JASONObject = &#123;"name": "艾曼爷爷", "age": 21&#125;;</span><br><span class="line"></span><br><span class="line">    document.getElementById("name").innerHTML = JASONObject.name;</span><br><span class="line">    document.getElementById("age").innerHTML = JASONObject.age;</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>
<p>打开网页我们能正确看到如下效果：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/26json.png?raw=true" alt="26json.png"></p>
<p>但通常情况中，我们拿到和上传的并不是一个真正的JSON对象，而是一串由JSON转换得来的字符串，我们同样在HTML中模拟解析一下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSON学习<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    Name:<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    Age:<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"age"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> txt = <span class="string">'&#123;"students":['</span> +</span></span><br><span class="line"><span class="javascript">        <span class="string">'&#123;"name":"艾曼爷爷0","age":21&#125;,'</span> +</span></span><br><span class="line"><span class="javascript">        <span class="string">'&#123;"name":"艾曼爷爷1","age":21 &#125;]&#125;'</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> obj = <span class="built_in">eval</span>(<span class="string">"("</span> + txt + <span class="string">")"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">"name"</span>).innerHTML = obj.students[<span class="number">1</span>].name;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">"age"</span>).innerHTML = obj.students[<span class="number">1</span>].age;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>打开网页即可看到如下正确效果：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/27json.png?raw=true" alt="27json.png"></p>
<p><strong>从前端发送JSON数据到后台</strong></p>
<p>我们这里演示使用AJAX请求的方式来提交JSON数据到后台：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSON学习<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 因为不想手动引感觉挺麻烦，引了个菜鸟教程的 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://cdn.static.runoob.com/libs/jquery/1.10.2/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    id：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"123"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    名称：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"category xxx"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span> <span class="attr">id</span>=<span class="string">"sender"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"messageDiv"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">'#sender'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> id = <span class="built_in">document</span>.getElementById(<span class="string">'id'</span>).value;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> name = <span class="built_in">document</span>.getElementById(<span class="string">'name'</span>).value;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> category = &#123;<span class="string">"name"</span>: name, <span class="string">"id"</span>: id&#125;;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> jsonData = <span class="built_in">JSON</span>.stringify(category);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> page = <span class="string">"category"</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="string">"put"</span>,</span></span><br><span class="line"><span class="undefined">            url: page,</span></span><br><span class="line"><span class="undefined">            data: jsonData,</span></span><br><span class="line"><span class="javascript">            dataType: <span class="string">"json"</span>,</span></span><br><span class="line"><span class="javascript">            contentType: <span class="string">"application/json;charset=UTF-8"</span>,</span></span><br><span class="line"><span class="javascript">            success: <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">"提交成功，请在springboot控制台查看服务端接收到的数据"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong> 在上面的例子中，我们使用了 <code>JSON.stringify()</code> 来将一个JSON对象转换成了一串字符串，并且在AJAX中，我们设置了 <code>dataType</code> 和 <code>contentType</code> 来告知后台我们传输的是一个JSON数据。</p>
<p>简单写一个Controller来验证一下吧：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span>(<span class="string">"/category"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCategory</span><span class="params">(@RequestBody Category category)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"springboot接受到浏览器以JSON格式提交的数据："</span> + category.getId() + category.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-----------控制台打印信息：----------</span><br><span class="line">springboot接受到浏览器以JSON格式提交的数据：123 category xxx</span><br></pre></td></tr></table></figure>
<p><strong>JSON库介绍</strong></p>
<p>在后台有许多支持解析JSON的库，目前对于Java开源的JSON类库有许多，下面我们介绍三种比较常用的JSON库，并进行比对说明，它们分别是：</p>
<p><strong>（1）Gson（项目地址：<a href="https://github.com/google/gson" target="_blank" rel="noopener">https://github.com/google/gson</a>)</strong></p>
<p>Gson是目前功能最全的Json解析神器，Gson当初是为因应Google公司内部需求而由Google自行研发而来，但自从在2008年五月公开发布第一版后已被许多公司或用户应用。Gson的应用主要为toJson与fromJson两个转换函数，无依赖，不需要例外额外的jar，能够直接跑在JDK上。而在使用这种对象转换之前需先创建好对象的类型以及其成员才能成功的将JSON字符串成功转换成相对应的对象。类里面只要有get和set方法，Gson完全可以将复杂类型的json到bean或bean到json的转换，是JSON解析的神器。</p>
<p><strong>（2）FastJson（项目地址：<a href="https://github.com/alibaba/fastjson）" target="_blank" rel="noopener">https://github.com/alibaba/fastjson）</a></strong></p>
<p>Fastjson是一个Java语言编写的高性能的JSON处理器,由阿里巴巴公司开发。无依赖，不需要例外额外的jar，能够直接跑在JDK上。FastJson在复杂类型的Bean转换Json上会出现一些问题，可能会出现引用的类型，导致Json转换出错，需要制定引用。FastJson采用独创的算法，将parse的速度提升到极致，超过所有json库。</p>
<p><strong>（3）Jackson（项目地址：<a href="https://github.com/FasterXML/jackson）" target="_blank" rel="noopener">https://github.com/FasterXML/jackson）</a></strong></p>
<p>相比json-lib框架，Jackson所依赖的jar包较少，简单易用并且性能也要相对高些。而且Jackson社区相对比较活跃，更新速度也比较快。Jackson对于复杂类型的json转换bean会出现问题，一些集合Map，List的转换出现问题。Jackson对于复杂类型的bean转换Json，转换的json格式不是标准的Json格式。</p>
<p><strong>到底使用哪一个JSON库呢？</strong></p>
<p>FastJson在复杂类型的Bean转换Json上会出现一些问题，但是在解析JSON时却是最快的。</p>
<p><strong>总结如下：</strong></p>
<ul>
<li><p>FastJson的API设计的最简单，最方便使用，直接使用JSON的两个静态方法即可完成四种操作；而Gson和Jackson都需要new一个对象；</p>
</li>
<li><p>数据量大时，使用Jackson;</p>
</li>
<li><p>如果有性能要求可以使用Gson/Jackson将bean转换json确保数据的正确性，使用FastJson将Json转换成Bean</p>
</li>
</ul>
<p><strong>三种JSON库简要使用说明</strong></p>
<p>在使用之前，我们先来建设一些基础类，用于支持JSON库的使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* getter and setter */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"名字为"</span> + name + <span class="string">",年龄"</span> + age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Gson库使用简要说明</strong></p>
<p><strong>（1）Maven依赖：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Gson库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>（2）使用示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tester</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 准备测试数据 —————————————————— */</span></span><br><span class="line"></span><br><span class="line">    Person person1 = <span class="keyword">new</span> Person();</span><br><span class="line">    person1.setName(<span class="string">"艾曼爷爷1"</span>);</span><br><span class="line">    person1.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    Person person2 = <span class="keyword">new</span> Person();</span><br><span class="line">    person2.setName(<span class="string">"艾曼爷爷2"</span>);</span><br><span class="line">    person2.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    Person person3 = <span class="keyword">new</span> Person();</span><br><span class="line">    person3.setName(<span class="string">"艾曼爷爷3"</span>);</span><br><span class="line">    person3.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;Person&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    list.add(person1);</span><br><span class="line">    list.add(person2);</span><br><span class="line">    list.add(person3);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 简单的Bean转为JSON —————————————————— */</span></span><br><span class="line">    String jsonString = gson.toJson(person1);</span><br><span class="line">    System.out.println(<span class="string">"简单的Bean转为JSON："</span> + jsonString);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— JSON转为简单Bean —————————————————— */</span></span><br><span class="line">    Person personFromJson = gson.fromJson(jsonString, Person.class);</span><br><span class="line">    System.out.println(<span class="string">"JSON转为简单Bean："</span> + personFromJson.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 带泛型的List转JSON —————————————————— */</span></span><br><span class="line">    String jsonStringFromList = gson.toJson(list);</span><br><span class="line">    System.out.println(<span class="string">"带泛型的List转JSON："</span> + jsonStringFromList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— JSONz转为带泛型的List —————————————————— */</span></span><br><span class="line">    List&lt;Person&gt; retList = gson.fromJson(jsonStringFromList, <span class="keyword">new</span> TypeToken&lt;List&lt;Person&gt;&gt;() &#123;</span><br><span class="line">    &#125;.getType());</span><br><span class="line">    <span class="keyword">for</span> (Person tempPerson : retList) &#123;</span><br><span class="line">        System.out.println(tempPerson.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">------------------结果如下------------------</span><br><span class="line">简单的Bean转为JSON：&#123;<span class="string">"name"</span>:<span class="string">"艾曼爷爷1"</span>,<span class="string">"age"</span>:<span class="number">21</span>&#125;</span><br><span class="line">JSON转为简单Bean：名字为艾曼爷爷<span class="number">1</span>,年龄<span class="number">21</span></span><br><span class="line">带泛型的List转JSON：[&#123;<span class="string">"name"</span>:<span class="string">"艾曼爷爷1"</span>,<span class="string">"age"</span>:<span class="number">21</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"艾曼爷爷2"</span>,<span class="string">"age"</span>:<span class="number">21</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"艾曼爷爷3"</span>,<span class="string">"age"</span>:<span class="number">21</span>&#125;]</span><br><span class="line">名字为艾曼爷爷<span class="number">1</span>,年龄<span class="number">21</span></span><br><span class="line">名字为艾曼爷爷<span class="number">2</span>,年龄<span class="number">21</span></span><br><span class="line">名字为艾曼爷爷<span class="number">3</span>,年龄<span class="number">21</span></span><br></pre></td></tr></table></figure>
<p><strong>FastJson库简要使用说明</strong></p>
<p><strong>（1）Maven依赖：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- FastJson库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>（2）使用示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tester</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 准备测试数据 —————————————————— */</span></span><br><span class="line"></span><br><span class="line">    Person person1 = <span class="keyword">new</span> Person();</span><br><span class="line">    person1.setName(<span class="string">"艾曼爷爷1"</span>);</span><br><span class="line">    person1.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    Person person2 = <span class="keyword">new</span> Person();</span><br><span class="line">    person2.setName(<span class="string">"艾曼爷爷2"</span>);</span><br><span class="line">    person2.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    Person person3 = <span class="keyword">new</span> Person();</span><br><span class="line">    person3.setName(<span class="string">"艾曼爷爷3"</span>);</span><br><span class="line">    person3.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;Person&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    list.add(person1);</span><br><span class="line">    list.add(person2);</span><br><span class="line">    list.add(person3);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 简单的Bean转为JSON —————————————————— */</span></span><br><span class="line">    String jsonString = JSON.toJSONString(person1);</span><br><span class="line">    System.out.println(<span class="string">"简单的Bean转为JSON："</span> + jsonString);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— JSON转为简单Bean —————————————————— */</span></span><br><span class="line">    Person personFromJson = JSON.parseObject(jsonString, Person.class);</span><br><span class="line">    System.out.println(<span class="string">"JSON转为简单Bean："</span> + personFromJson.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 带泛型的List转JSON —————————————————— */</span></span><br><span class="line">    String jsonStringFromList = JSON.toJSONString(list);</span><br><span class="line">    System.out.println(<span class="string">"带泛型的List转JSON："</span> + jsonStringFromList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— JSONz转为带泛型的List —————————————————— */</span></span><br><span class="line">    List&lt;Person&gt; retList = JSON.parseObject(jsonStringFromList, <span class="keyword">new</span> TypeReference&lt;List&lt;Person&gt;&gt;() &#123;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (Person tempPerson : retList) &#123;</span><br><span class="line">        System.out.println(tempPerson.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">------------------结果如下------------------</span><br><span class="line">简单的Bean转为JSON：&#123;<span class="string">"age"</span>:<span class="number">21</span>,<span class="string">"name"</span>:<span class="string">"艾曼爷爷1"</span>&#125;</span><br><span class="line">JSON转为简单Bean：名字为艾曼爷爷<span class="number">1</span>,年龄<span class="number">21</span></span><br><span class="line">带泛型的List转JSON：[&#123;<span class="string">"age"</span>:<span class="number">21</span>,<span class="string">"name"</span>:<span class="string">"艾曼爷爷1"</span>&#125;,&#123;<span class="string">"age"</span>:<span class="number">21</span>,<span class="string">"name"</span>:<span class="string">"艾曼爷爷2"</span>&#125;,&#123;<span class="string">"age"</span>:<span class="number">21</span>,<span class="string">"name"</span>:<span class="string">"艾曼爷爷3"</span>&#125;]</span><br><span class="line">名字为艾曼爷爷<span class="number">1</span>,年龄<span class="number">21</span></span><br><span class="line">名字为艾曼爷爷<span class="number">2</span>,年龄<span class="number">21</span></span><br><span class="line">名字为艾曼爷爷<span class="number">3</span>,年龄<span class="number">21</span></span><br></pre></td></tr></table></figure>
<p><strong>Jackson库使用简要说明</strong></p>
<p><strong>1）Maven依赖：</strong></p>
<p>稍微麻烦一点的是Jackson需要依赖三个包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- jackson库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>（2）使用示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tester</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 准备测试数据 —————————————————— */</span></span><br><span class="line"></span><br><span class="line">    Person person1 = <span class="keyword">new</span> Person();</span><br><span class="line">    person1.setName(<span class="string">"艾曼爷爷1"</span>);</span><br><span class="line">    person1.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    Person person2 = <span class="keyword">new</span> Person();</span><br><span class="line">    person2.setName(<span class="string">"艾曼爷爷2"</span>);</span><br><span class="line">    person2.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    Person person3 = <span class="keyword">new</span> Person();</span><br><span class="line">    person3.setName(<span class="string">"艾曼爷爷3"</span>);</span><br><span class="line">    person3.setAge(<span class="number">21</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;Person&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    list.add(person1);</span><br><span class="line">    list.add(person2);</span><br><span class="line">    list.add(person3);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ObjectMapper是JSON操作的核心，Jackson的所有JSON操作都是在ObjectMapper中实现的 */</span></span><br><span class="line">    ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 简单的Bean转为JSON —————————————————— */</span></span><br><span class="line">    String jsonString = mapper.writeValueAsString(person1);</span><br><span class="line">    System.out.println(<span class="string">"简单的Bean转为JSON："</span> + jsonString);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— JSON转为简单Bean —————————————————— */</span></span><br><span class="line">    Person personFromJson = mapper.readValue(jsonString, Person.class);</span><br><span class="line">    System.out.println(<span class="string">"JSON转为简单Bean："</span> + personFromJson.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— 带泛型的List转JSON —————————————————— */</span></span><br><span class="line">    String jsonStringFromList = mapper.writeValueAsString(list);</span><br><span class="line">    System.out.println(<span class="string">"带泛型的List转JSON："</span> + jsonStringFromList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* —————————————————— JSONz转为带泛型的List —————————————————— */</span></span><br><span class="line"><span class="comment">//      List&lt;LinkedHashMap&lt;String, Person&gt;&gt; retList = mapper.readValue(jsonStringFromList, List.class);</span></span><br><span class="line"><span class="comment">//      for (int i = 0; i &lt; retList.size(); i++) &#123;</span></span><br><span class="line"><span class="comment">//          Map&lt;String, Person&gt; map = retList.get(i);</span></span><br><span class="line"><span class="comment">//          Set&lt;String&gt; set = map.keySet();</span></span><br><span class="line"><span class="comment">//          for (Iterator&lt;String&gt; it = set.iterator(); it.hasNext();) &#123;</span></span><br><span class="line"><span class="comment">//              String key = it.next();</span></span><br><span class="line"><span class="comment">//              System.out.println(key + ":" + map.get(key));</span></span><br><span class="line"><span class="comment">//          &#125;</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line">    <span class="comment">/* —————————————————— JSONz转为Array数组 —————————————————— */</span></span><br><span class="line">    Person[] retList = mapper.readValue(jsonStringFromList, Person[].class);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; retList.length; i++) &#123;</span><br><span class="line">        System.out.println(retList[i].toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">------------------结果如下------------------</span><br><span class="line">简单的Bean转为JSON：&#123;<span class="string">"name"</span>:<span class="string">"艾曼爷爷1"</span>,<span class="string">"age"</span>:<span class="number">21</span>&#125;</span><br><span class="line">JSON转为简单Bean：名字为艾曼爷爷<span class="number">1</span>,年龄<span class="number">21</span></span><br><span class="line">带泛型的List转JSON：[&#123;<span class="string">"name"</span>:<span class="string">"艾曼爷爷1"</span>,<span class="string">"age"</span>:<span class="number">21</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"艾曼爷爷2"</span>,<span class="string">"age"</span>:<span class="number">21</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"艾曼爷爷3"</span>,<span class="string">"age"</span>:<span class="number">21</span>&#125;]</span><br><span class="line">名字为艾曼爷爷<span class="number">1</span>,年龄<span class="number">21</span></span><br><span class="line">名字为艾曼爷爷<span class="number">2</span>,年龄<span class="number">21</span></span><br><span class="line">名字为艾曼爷爷<span class="number">3</span>,年龄<span class="number">21</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong></p>
<ul>
<li>由于Jackson底层代码抛出了IOEception，所以我们在调用的时候也需要抛出；</li>
<li>Jackson所有的操作都是基于ObjectMapper</li>
</ul>
<p><strong>在框架中使用JSON</strong></p>
<p>SpingMVC和SpringBoot一样，都能通过注解的方式获取并返回一串JSON格式的数据，我们使用SpringBoot的一段实例程序来实际说明一下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/jsonCategory"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span>    <span class="comment">// 该注解表示我们的请求不再交给springmvc处理，而是结合JSON包，将对象解析成JSON字符串</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Category <span class="title">jsonCategory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Category(<span class="number">123</span>, <span class="string">"艾曼爷爷"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们在浏览器中访问地址：<code>localhost:8080/jsonCategory</code>，会得到以下JSON数据：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/28json.png?raw=true" alt="28json.png"></p>
<p>我们也可以使用 <code>@RequestBody</code> 来获取一串JSON数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span>(<span class="string">"/category"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCategory</span><span class="params">(@RequestBody Category category)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"springboot接受到浏览器以JSON格式提交的数据："</span> + category.getId() + category.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们在前台使用的是上面用过的用于提交JSON数据的页面，运行能够成功得到结果：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/29json.png?raw=true" alt="29json.png"></p>
<p><strong>注意：</strong> Spring4 之后新加入了 <code>@RestController</code> 注解，是@ResponseBody和@Controller的组合注解，用于返回JSON数据。</p>
<h3 id="2-22-使用RESTful风格"><a href="#2-22-使用RESTful风格" class="headerlink" title="2.22 使用RESTful风格"></a>2.22 使用RESTful风格</h3><p><strong>什么是RESTful风格？</strong></p>
<p>REST是<strong>REpresentational State Transfer</strong>的缩写（一般中文翻译为表述性状态转移），REST 是一种体系结构，而 HTTP 是一种包含了 REST 架构属性的协议，为了便于理解，我们把它的首字母拆分成不同的几个部分：</p>
<ul>
<li><strong>表述性（REpresentational）：</strong> REST 资源实际上可以用各种形式来进行表述，包括 XML、JSON 甚至 HTML——最适合资源使用者的任意形式；</li>
<li><strong>状态（State）：</strong> 当使用 REST 的时候，我们更关注资源的状态而不是对资源采取的行为；</li>
<li><strong>转义（Transfer）：</strong> REST 涉及到转移资源数据，它以某种表述性形式从一个应用转移到另一个应用。</li>
</ul>
<p><strong>简单地说，REST 就是将资源的状态以适合客户端或服务端的形式从服务端转移到客户端（或者反过来）。</strong>在 REST 中，资源<strong>通过 URL 进行识别和定位</strong>，然后通过<strong>行为(即 HTTP 方法)</strong>来定义 REST 来完成怎样的功能。</p>
<p><strong>实例说明:</strong></p>
<p>在平时的 Web 开发中，method 常用的值是 GET 和 POST，但是实际上，HTTP 方法还有 PATCH、DELETE、PUT 等其他值，这些方法又通常会匹配为如下的 CRUD 动作:</p>
<table>
<thead>
<tr>
<th style="text-align:center">CRUD 动作</th>
<th style="text-align:center">HTTP 方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Create</td>
<td style="text-align:center">POST</td>
</tr>
<tr>
<td style="text-align:center">Read</td>
<td style="text-align:center">GET</td>
</tr>
<tr>
<td style="text-align:center">Update</td>
<td style="text-align:center">PUT 或 PATCH</td>
</tr>
<tr>
<td style="text-align:center">Delete</td>
<td style="text-align:center">DELETE</td>
</tr>
</tbody>
</table>
<p>尽管通常来讲，HTTP 方法会映射为 CRUD 动作，但这并不是严格的限制，有时候 PUT 也可以用来创建新的资源，POST 也可以用来更新资源。实际上，POST 请求<strong>非幂等的特性</strong>(即同一个 URL 可以得到不同的结果)使其成一个非常灵活地方法，对于无法适应其他 HTTP 方法语义的操作，它都能够胜任。</p>
<p>在使用 RESTful 风格之前，我们如果想要<strong>增加一条商品数据</strong>通常是这样的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/addCategory?name=xxx</span><br></pre></td></tr></table></figure>
<p>但是使用了 RESTful 风格之后就会变成:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/category</span><br></pre></td></tr></table></figure>
<p>这就变成了<strong>使用同一个 URL</strong> ，通过<strong>约定不同的 HTTP 方法</strong>来实施不同的业务，这就是 RESTful 风格所做的事情了，为了有一个更加直观的理解，引用一下来自how2j.cn的图:</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/30restful.png?raw=true" alt="30restful.png"></p>
<p><strong>SpringBoot 中使用 RESTful</strong></p>
<p>RESTful API 具体设计如下：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/31restful.png?raw=true" alt="31restful.png"></p>
<p>User实体定义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> Long id; </span><br><span class="line">    <span class="keyword">private</span> String name; </span><br><span class="line">    <span class="keyword">private</span> Integer age; </span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 省略setter和getter </span></span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实现对User对象的操作接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> </span><br><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/users"</span>)     <span class="comment">// 通过这里配置使下面的映射都在/users下 </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123; </span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 创建线程安全的Map </span></span><br><span class="line">    <span class="keyword">static</span> Map&lt;Long, User&gt; users = Collections.synchronizedMap(<span class="keyword">new</span> HashMap&lt;Long, User&gt;()); </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/"</span>, method=RequestMethod.GET) </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123; </span><br><span class="line">        <span class="comment">// 处理"/users/"的GET请求，用来获取用户列表 </span></span><br><span class="line">        <span class="comment">// 还可以通过@RequestParam从页面中传递参数来进行查询条件或者翻页信息的传递 </span></span><br><span class="line">        List&lt;User&gt; r = <span class="keyword">new</span> ArrayList&lt;User&gt;(users.values()); </span><br><span class="line">        <span class="keyword">return</span> r; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/"</span>, method=RequestMethod.POST) </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">postUser</span><span class="params">(@ModelAttribute User user)</span> </span>&#123; </span><br><span class="line">        <span class="comment">// 处理"/users/"的POST请求，用来创建User </span></span><br><span class="line">        <span class="comment">// 除了@ModelAttribute绑定参数之外，还可以通过@RequestParam从页面中传递参数 </span></span><br><span class="line">        users.put(user.getId(), user); </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/&#123;id&#125;"</span>, method=RequestMethod.GET) </span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(@PathVariable Long id)</span> </span>&#123; </span><br><span class="line">        <span class="comment">// 处理"/users/&#123;id&#125;"的GET请求，用来获取url中id值的User信息 </span></span><br><span class="line">        <span class="comment">// url中的id可通过@PathVariable绑定到函数的参数中 </span></span><br><span class="line">        <span class="keyword">return</span> users.get(id); </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/&#123;id&#125;"</span>, method=RequestMethod.PUT) </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">putUser</span><span class="params">(@PathVariable Long id, @ModelAttribute User user)</span> </span>&#123; </span><br><span class="line">        <span class="comment">// 处理"/users/&#123;id&#125;"的PUT请求，用来更新User信息 </span></span><br><span class="line">        User u = users.get(id); </span><br><span class="line">        u.setName(user.getName()); </span><br><span class="line">        u.setAge(user.getAge()); </span><br><span class="line">        users.put(id, u); </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/&#123;id&#125;"</span>, method=RequestMethod.DELETE) </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">(@PathVariable Long id)</span> </span>&#123; </span><br><span class="line">        <span class="comment">// 处理"/users/&#123;id&#125;"的DELETE请求，用来删除User </span></span><br><span class="line">        users.remove(id); </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>总结</strong></p>
<p>我们仍然使用 <strong>@RequestMapping</strong> 注解，但不同的是，我们指定 method 属性来处理不同的 HTTP 方法，并且通过 <strong>@PathVariable</strong> 注解来将 HTTP 请求中的属性绑定到我们指定的形参上。</p>
<p>事实上，Spring 4.3 之后，为了更好的支持 RESTful 风格，增加了几个注解：<strong>@PutMapping</strong>、<strong>@GetMapping</strong>、<strong>@DeleteMapping</strong>、<strong>@PostMapping</strong>，从名字也能大概的看出，其实也就是将 method 属性的值与 @RequestMapping 进行了绑定而已，例如，我们对UserController中的deleteUser方法进行改造：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-----------改造前-----------</span><br><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/&#123;id&#125;"</span>, method=RequestMethod.DELETE)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">(@PathVariable Long id)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 处理"/users/&#123;id&#125;"的DELETE请求，用来删除User</span></span><br><span class="line">    users.remove(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-----------改造后-----------</span><br><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">(@PathVariable Long id)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 处理"/users/&#123;id&#125;"的DELETE请求，用来删除User</span></span><br><span class="line">    users.remove(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>使用Swagger2构造RESTful API文档</strong></p>
<p>RESTful 风格为后台与前台的交互提供了简洁的接口API，并且有利于减少与其他团队的沟通成本，通常情况下，我们会创建一份RESTful API文档来记录所有的接口细节，但是这样做有以下的几个问题：</p>
<ul>
<li>由于接口众多，并且细节复杂（需要考虑不同的HTTP请求类型、HTTP头部信息、HTTP请求内容等），<strong>高质量地创建这份文档本身就是件非常吃力的事</strong>，下游的抱怨声不绝于耳。</li>
<li>随着时间推移，不断修改接口实现的时候都必须同步修改接口文档，而文档与代码又处于两个不同的媒介，除非有严格的管理机制，不然<strong>很容易导致不一致现象。</strong></li>
</ul>
<p>Swagger2的出现就是为了解决上述的这些问题，并且能够轻松的整合到我们的SpringBoot中去，它既可以减少我们创建文档的工作量，同时说明内容又可以整合到代码之中去，让维护文档和修改代码整合为一体，可以让我们在修改代码逻辑的同时方便的修改文档说明，这太酷了，另外<strong>Swagger2页提供了强大的页面测试功能来调试每个RESTful API</strong>，具体效果如下：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/32restful.png?raw=true" alt="32restful.png"></p>
<p><strong>第一步：添加Swagger2依赖：</strong></p>
<p>在 <code>pom.xml</code> 中加入Swagger2的依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>第二步：创建Swagger2配置类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span><span class="comment">//让Spring来加载该配置类</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2<span class="comment">//启动Swagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Swagger2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;<span class="comment">//创建 Docket 的Bean</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())<span class="comment">//创建该API的基本信息（这些基本信息会展现在文档页面中）</span></span><br><span class="line">                .select()<span class="comment">//返回一个 ApiSelectorBuilder 实例用来控制哪些接口暴露给Swagger来展现</span></span><br><span class="line">            	<span class="comment">//Swagger会扫描该包下所有的Controller定义的API，并产生文档内容</span></span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">"cn.aimanyeye.springboot"</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                .title(<span class="string">"Spring Boot中使用Swagger2构建RESTful APIs"</span>)</span><br><span class="line">                .description(<span class="string">"原文地址链接：http://blog.didispace.com/springbootswagger2/"</span>)</span><br><span class="line">                .termsOfServiceUrl(<span class="string">"http://blog.didispace.com/"</span>)</span><br><span class="line">                .contact(<span class="string">"@艾曼爷爷"</span>)</span><br><span class="line">                .version(<span class="string">"1.0"</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如上面的代码所示，通过 <code>@Configuration</code> 注解让Spring来加载该配置类，再通过 <code>@EnableSwagger2</code> 注解来启动Swagger2；</p>
<p>再通过 <code>createRestApi</code> 函数创建 <code>Docket</code> 的Bean之后，<code>apiInfo()</code> 用来创建该API的基本信息（这些基本信息会展现在文档页面中），<code>select()</code> 函数返回一个 <code>ApiSelectorBuilder</code> 实例用来控制哪些接口暴露给Swagger来展现，本例采用<strong>指定扫描的包路径</strong>来定义，Swagger会扫描该包下所有的Controller定义的API，并产生文档内容（除了被 <code>@ApiIgnore</code> 指定的请求）</p>
<p><strong>第三步：添加文档内容</strong></p>
<p>在完成了上述配置后，其实已经可以生产文档内容，但是这样的文档主要针对请求本身，而描述主要来源于函数等命名产生，对用户并不友好，我们通常需要自己增加一些说明来丰富文档内容。如下所示，我们通过<code>@ApiOperation</code>注解来给API增加说明、通过<code>@ApiImplicitParams</code>、<code>@ApiImplicitParam</code>注解来给参数增加说明。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/users"</span>)     <span class="comment">// 通过这里配置使下面的映射都在/users下，可去除</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Map&lt;Long, User&gt; users = Collections.synchronizedMap(<span class="keyword">new</span> HashMap&lt;Long, User&gt;());</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"获取用户列表"</span>, notes=<span class="string">""</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=&#123;<span class="string">""</span>&#125;, method=RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; r = <span class="keyword">new</span> ArrayList&lt;User&gt;(users.values());</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"创建用户"</span>, notes=<span class="string">"根据User对象创建用户"</span>)</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"user"</span>, value = <span class="string">"用户详细实体user"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"User"</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">""</span>, method=RequestMethod.POST)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">postUser</span><span class="params">(@RequestBody User user)</span> </span>&#123;</span><br><span class="line">        users.put(user.getId(), user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"获取用户详细信息"</span>, notes=<span class="string">"根据url的id来获取用户详细信息"</span>)</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"id"</span>, value = <span class="string">"用户ID"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"Long"</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/&#123;id&#125;"</span>, method=RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(@PathVariable Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> users.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"更新用户详细信息"</span>, notes=<span class="string">"根据url的id来指定更新对象，并根据传过来的user信息来更新用户详细信息"</span>)</span><br><span class="line">    <span class="meta">@ApiImplicitParams</span>(&#123;</span><br><span class="line">            <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"id"</span>, value = <span class="string">"用户ID"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"Long"</span>),</span><br><span class="line">            <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"user"</span>, value = <span class="string">"用户详细实体user"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"User"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/&#123;id&#125;"</span>, method=RequestMethod.PUT)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">putUser</span><span class="params">(@PathVariable Long id, @RequestBody User user)</span> </span>&#123;</span><br><span class="line">        User u = users.get(id);</span><br><span class="line">        u.setName(user.getName());</span><br><span class="line">        u.setAge(user.getAge());</span><br><span class="line">        users.put(id, u);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value=<span class="string">"删除用户"</span>, notes=<span class="string">"根据url的id来指定删除对象"</span>)</span><br><span class="line">    <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"id"</span>, value = <span class="string">"用户ID"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"Long"</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/&#123;id&#125;"</span>, method=RequestMethod.DELETE)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">(@PathVariable Long id)</span> </span>&#123;</span><br><span class="line">        users.remove(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>完成上述代码添加之后，启动Spring Boot程序，访问：<a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a>，就能看到前文展示的RESTful API的页面，我们可以点开具体的API请求，POST类型的/users请求为例，可找到上述代码中我们配置的Notes信息以及参数user的描述信息，如下图所示：</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/33restful.png?raw=true" alt="33restful.png"></p>
<p><strong>API文档访问与调试</strong></p>
<p>在上图请求的页面中，我们可以看到一个Value的输入框，并且在右边的Model Schema中有示例的User对象模板，我们点击右边黄色的区域Value框中就会自动填好示例的模板数据，我们可以稍微修改修改，然后点击下方的 <code>“Try it out!”</code> 按钮，即可完成一次请求调用，这太酷了。</p>
<p><img src="https://github.com/aimanyeye/blog-images/blob/master/blog-img/%E9%9D%A2%E8%AF%95/2019-08-05-Java%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93-Java%20Web%E7%AF%87/34restful.png?raw=true" alt="34restful.png"></p>
<p><strong>总结</strong><br>对比之前用文档来记录RESTful API的方式，我们通过增加少量的配置内容，在原有代码的基础上侵入了忍受范围内的代码，就可以达到如此方便、直观的效果，可以说是使用Swagger2来对API文档进行管理，是个很不错的选择！</p>

      
    </div>
    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/wechat-qcode.jpg" alt="艾曼爷爷 wechat" style="width: 200px; max-width: 100%;">
    <div>扫描二维码关注微信公众号，了解更多</div>
</div>

      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>赞赏是最好的支持与鼓励！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="艾曼爷爷 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="艾曼爷爷 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    艾曼爷爷
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://aimanyeye.github.io/2019/08/05/2019-08-05-Java面试知识点总结-Java Web篇/" title="Java面试知识点总结-Java Web篇">https://aimanyeye.github.io/2019/08/05/2019-08-05-Java面试知识点总结-Java Web篇/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://aimanyeye.github.io/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java面试/" rel="tag"># Java面试</a>
          
            <a href="/tags/Java-Web/" rel="tag"># Java Web</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/04/2019-08-04-Java面试知识点总结-数据库篇/" rel="next" title="Java面试知识点总结-数据库篇">
                <i class="fa fa-chevron-left"></i> Java面试知识点总结-数据库篇
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/06/2019-08-06-Java面试知识点总结-Java IO篇/" rel="prev" title="Java面试知识点总结-Java IO篇">
                Java面试知识点总结-Java IO篇 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div id="gitalk-container"></div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/logo.jpg" alt="艾曼爷爷">
            
              <p class="site-author-name" itemprop="name">艾曼爷爷</p>
              <p class="site-description motion-element" itemprop="description">微信公众号：aimanyeye</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">55</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#目录"><span class="nav-number">1.</span> <span class="nav-text">目录</span></a></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#1-J2EE相关知识点"><span class="nav-number"></span> <span class="nav-text">1. J2EE相关知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-Servlet-的生命周期？"><span class="nav-number">1.</span> <span class="nav-text">1.1 Servlet 的生命周期？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-Servlet-的请求流程？"><span class="nav-number">2.</span> <span class="nav-text">1.2 Servlet 的请求流程？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-Servlet-是单例的吗？为什么？"><span class="nav-number">3.</span> <span class="nav-text">1.3 Servlet 是单例的吗？为什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-GET和POST的区别"><span class="nav-number">4.</span> <span class="nav-text">1.4 GET和POST的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-Tomcat-中如何解决中文乱码问题？"><span class="nav-number">5.</span> <span class="nav-text">1.5 Tomcat 中如何解决中文乱码问题？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-forward-与-redirect-的区别"><span class="nav-number">6.</span> <span class="nav-text">1.6 forward 与 redirect 的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#请求转发（forward）"><span class="nav-number">6.1.</span> <span class="nav-text">请求转发（forward）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#URl-重定向（redirect）"><span class="nav-number">6.2.</span> <span class="nav-text">URl 重定向（redirect）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7-JSP-的执行原理？"><span class="nav-number">7.</span> <span class="nav-text">1.7 JSP 的执行原理？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-8-request-getAttribute-和-request-getParameter-有何区别？"><span class="nav-number">8.</span> <span class="nav-text">1.8 request.getAttribute() 和 request.getParameter() 有何区别？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-9-JSP-与-Servlet-的区别？"><span class="nav-number">9.</span> <span class="nav-text">1.9 JSP 与 Servlet 的区别？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-10-JSP-静态包含和动态包含的区别？"><span class="nav-number">10.</span> <span class="nav-text">1.10 JSP 静态包含和动态包含的区别？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-11-JSP-有哪些内置对象？作用分别是什么？"><span class="nav-number">11.</span> <span class="nav-text">1.11 JSP 有哪些内置对象？作用分别是什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-12-JSTL-是什么？优点有哪些？"><span class="nav-number">12.</span> <span class="nav-text">1.12 JSTL 是什么？优点有哪些？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-13-什么是-Cookie？Session-和-Cookie-有什么区别？"><span class="nav-number">13.</span> <span class="nav-text">1.13 什么是 Cookie？Session 和 Cookie 有什么区别？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-14-什么是过滤器？"><span class="nav-number">14.</span> <span class="nav-text">1.14 什么是过滤器？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-15-为什么在-Web-开发中需要用到过滤器？"><span class="nav-number">15.</span> <span class="nav-text">1.15 为什么在 Web 开发中需要用到过滤器？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-16-MVC-模式？"><span class="nav-number">16.</span> <span class="nav-text">1.16 MVC 模式？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-框架相关知识点"><span class="nav-number"></span> <span class="nav-text">2. 框架相关知识点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-什么是框架？"><span class="nav-number">1.</span> <span class="nav-text">2.1 什么是框架？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-什么是Spring"><span class="nav-number">2.</span> <span class="nav-text">2.2 什么是Spring</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-什么是非侵入式设计？"><span class="nav-number">3.</span> <span class="nav-text">2.3 什么是非侵入式设计？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-Spring-有什么优势？"><span class="nav-number">4.</span> <span class="nav-text">2.4 Spring 有什么优势？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-Spring-IoC-和-DI-分别是什么？"><span class="nav-number">5.</span> <span class="nav-text">2.5 Spring IoC 和 DI 分别是什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-BeanFactory-和-ApplicationContext-的区别"><span class="nav-number">6.</span> <span class="nav-text">2.6 BeanFactory 和 ApplicationContext 的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-7-IoC-是如何实现的"><span class="nav-number">7.</span> <span class="nav-text">2.7 IoC 是如何实现的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-8-Spring-配置-Bean-有几种方式？"><span class="nav-number">8.</span> <span class="nav-text">2.8 Spring 配置 Bean 有几种方式？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-9-介绍一下-Spring-AOP"><span class="nav-number">9.</span> <span class="nav-text">2.9 介绍一下 Spring AOP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-10-Spring-中-Bean-的作用域"><span class="nav-number">10.</span> <span class="nav-text">2.10 Spring 中 Bean 的作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-11-Spring-MVC-的请求流程"><span class="nav-number">11.</span> <span class="nav-text">2.11 Spring MVC 的请求流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-12-Spring-MVC-的架构"><span class="nav-number">12.</span> <span class="nav-text">2.12 Spring MVC 的架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-13-什么是-ORM？"><span class="nav-number">13.</span> <span class="nav-text">2.13 什么是 ORM？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-14-为什么要使用-MyBatis-？"><span class="nav-number">14.</span> <span class="nav-text">2.14 为什么要使用 MyBatis ？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-15-MyBatis-中占位符-和-的区别"><span class="nav-number">15.</span> <span class="nav-text">2.15 MyBatis 中占位符 # 和 `###  的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-16-MyBatis-缓存结构"><span class="nav-number">16.</span> <span class="nav-text">2.16 MyBatis 缓存结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-17-Mybatis添加记录，返回主键id"><span class="nav-number">17.</span> <span class="nav-text">2.17 Mybatis添加记录，返回主键id</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-18-什么是-Spring-Boot-？"><span class="nav-number">18.</span> <span class="nav-text">2.18 什么是 Spring Boot ？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-19-使用-Spring-Boot-有什么好处？"><span class="nav-number">19.</span> <span class="nav-text">2.19 使用 Spring Boot 有什么好处？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-20-分页功能"><span class="nav-number">20.</span> <span class="nav-text">2.20 分页功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-21-JSON使用"><span class="nav-number">21.</span> <span class="nav-text">2.21 JSON使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-22-使用RESTful风格"><span class="nav-number">22.</span> <span class="nav-text">2.22 使用RESTful风格</span></a></li></ol></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">艾曼爷爷</span>

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="/js/src/md5.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '3b1b21d6164dbd9a4aad',
          clientSecret: '699e21661be860daeb91d1daf05d9b9daa2570ba',
          repo: 'aimanyeye.github.io',
          owner: 'aimanyeye',
          admin: ['aimanyeye'],
          id: md5(location.pathname),
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')           
       </script>


  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
